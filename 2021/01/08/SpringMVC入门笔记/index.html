<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>SpringMVC入门笔记 | luxnln</title><meta name="keywords" content="spring"><meta name="author" content="Luxnln"><meta name="copyright" content="Luxnln"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="SpringMVC简述什么是SpringMVC？  Spring MVC 是一个基于 Java 的实现了 MVC 设计模式的请求驱动类型的轻量级 Web 框架，通过把 Model，View，Controller 分离，将 web 层进行职责解耦，把复杂的 web 应用分成逻辑清晰的几部分，简化开发，减少出错，方便组内开发人员之间的配合。  入门案例 导包:  SpringMVC 是 Spring">
<meta property="og:type" content="article">
<meta property="og:title" content="SpringMVC入门笔记">
<meta property="og:url" content="https://github.com/luxnln/luxnln.github.io/2021/01/08/SpringMVC%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="luxnln">
<meta property="og:description" content="SpringMVC简述什么是SpringMVC？  Spring MVC 是一个基于 Java 的实现了 MVC 设计模式的请求驱动类型的轻量级 Web 框架，通过把 Model，View，Controller 分离，将 web 层进行职责解耦，把复杂的 web 应用分成逻辑清晰的几部分，简化开发，减少出错，方便组内开发人员之间的配合。  入门案例 导包:  SpringMVC 是 Spring">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/luxnln/cdn@main/img/cover/cover3.png">
<meta property="article:published_time" content="2021-01-08T01:15:07.000Z">
<meta property="article:modified_time" content="2021-01-12T07:41:26.769Z">
<meta property="article:author" content="Luxnln">
<meta property="article:tag" content="框架">
<meta property="article:tag" content="spring">
<meta property="article:tag" content="ssm">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/luxnln/cdn@main/img/cover/cover3.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://github.com/luxnln/luxnln.github.io/2021/01/08/SpringMVC%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.js" defer></script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-8FB8GQC3GE"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-8FB8GQC3GE');
</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"6X03TQYT9L","apiKey":"727f7c62fe6e346f4448d0f80914ab79","indexName":"my-hexo-blog","hits":{"per_page":6},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":75,"languages":{"author":"作者: Luxnln","link":"链接: ","source":"来源: luxnln","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-01-12 15:41:26'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    })(window)</script><link rel="stylesheet" href="/css/mystyle.css"><meta name="generator" content="Hexo 5.4.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="https://cdn.jsdelivr.net/gh/luxnln/cdn@main/img/head/rocket.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">55</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">28</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">21</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/gh/luxnln/cdn@main/img/cover/cover3.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">luxnln</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">SpringMVC入门笔记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-01-08T01:15:07.000Z" title="发表于 2021-01-08 09:15:07">2021-01-08</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-01-12T07:41:26.769Z" title="更新于 2021-01-12 15:41:26">2021-01-12</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Java/">Java</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Java/Frame/">Frame</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">14.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>59分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/2021/01/08/SpringMVC%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/2021/01/08/SpringMVC%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0/" itemprop="commentCount"></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="SpringMVC简述"><a href="#SpringMVC简述" class="headerlink" title="SpringMVC简述"></a>SpringMVC简述</h2><p><strong>什么是SpringMVC？</strong></p>
<ul>
<li>Spring MVC 是一个基于 Java 的实现了 MVC 设计模式的请求驱动类型的轻量级 Web 框架，通过把 Model，View，Controller 分离，将 web 层进行职责解耦，把复杂的 web 应用分成逻辑清晰的几部分，简化开发，减少出错，方便组内开发人员之间的配合。</li>
</ul>
<h3 id="入门案例"><a href="#入门案例" class="headerlink" title="入门案例"></a><strong>入门案例</strong></h3><ol>
<li><p>导包:</p>
<ul>
<li>SpringMVC 是 Spring 的模块，所有模块的运行都是依赖于核心模考有 (IOC 模块)</li>
</ul>
<ol>
<li><p>普通项目：在官网下载 jar 包，然后导入，并右键【Add as Library】即可。</p>
<ol>
<li>核心容器模块：<ul>
<li>commons-logging-1.1.1.jar</li>
<li>spring-beans-5.2.6.RELEASE.jar</li>
<li>spring-context-5.2.6.RELEASE.jar</li>
<li>spring-core-5.2.6.RELEASE.jar</li>
<li>spring-expression-5.2.6.RELEASE.jar</li>
<li>spring-aop-5.2.6.RELEASE.jar</li>
</ul>
</li>
<li>web 模块<ul>
<li>spring-web-5.2.6.RELEASE.jar</li>
<li>spring-webmvc-5.2.6.RELEASE.jar</li>
</ul>
</li>
</ol>
</li>
<li><p>Maven 项目：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-beans<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>编写配置</p>
<ol>
<li><p>web.xml：配置springmvc的前端控制器，指定springmvc配置文件位置；</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">web-app</span> <span class="meta-keyword">PUBLIC</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">          SpringMVC思想是有一个前端的控制器能拦截所有请求，并智能派发</span></span><br><span class="line"><span class="comment">          这个前端控制器是一个servlet，应该在web.xml中配置这个servlet来拦截所有请求</span></span><br><span class="line"><span class="comment">      --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- contextConfigLocation：指定SpringMVC配置文件位置 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- servlet启动加载：servlet原本是第一次访问时创建对象。设置了&lt;load-on-startup&gt;之后在服务启动时创建--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- /* 和 / 都是拦截所有请求，但是/*的范围更大，/*还能拦截到*.jsp页面--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>springmvc.xml：SpringMVC 框架的配置；</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.luxnln.demo.controller&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/page/&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>编写代码</p>
<ol>
<li><p>hello.jsp：WEB-INF/page/hello.jsp；</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;hello&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">hello, world!</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>DemoController1.java：处理类；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span>  <span class="comment">// 加注解@Controller，告诉SpringMVC这是一个处理器</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoController1</span> </span>&#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">helloMethod</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;收到了请求...&quot;</span>);</span><br><span class="line">        <span class="comment">// 视图解析器会自动拼串</span></span><br><span class="line">        <span class="comment">// &lt;property name=&quot;prefix&quot; value=&quot;/pages/&quot;/&gt;</span></span><br><span class="line">        <span class="comment">// &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot;/&gt;</span></span><br><span class="line">        <span class="comment">// &quot;/pages/&quot; + &quot;a&quot; + &quot;.jsp&quot;</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>测试运行：在浏览器输入【<a href="http://ip:port/工程路径/hell】，即可看到返回的">http://ip:port/工程路径/hell】，即可看到返回的</a> Hello.jsp 页面；</p>
</li>
</ol>
<h4 id="关于入门案例的说明"><a href="#关于入门案例的说明" class="headerlink" title="关于入门案例的说明"></a>关于入门案例的说明</h4><h5 id="简单运行流程"><a href="#简单运行流程" class="headerlink" title="简单运行流程"></a>简单运行流程</h5><ol>
<li>客户端点击链接会发送<a target="_blank" rel="noopener" href="http://localhost/springmvc/hello">http://localhost:80/springmvc/hello</a> 请求；</li>
<li>来到 tomcat 服务器，SpringMVC 的前端控制器收到所有请求；</li>
<li>来看请求地址和 @RequestMapping 标注哪个匹配，来找到底使用哪个类的哪个方法来处理；</li>
<li>前端的控制器找到了目标处理类和目标方法，直接利用返回执行目标方法；</li>
<li>方法执行完成以后，会有一个返回值，SpringMVC 认为这个返回值就是要去的页面地址；</li>
<li>拿到方法返回值以后，用视图解析器进行拼串得到完整的页面地址；</li>
<li>拿到页面地址，前端控制器帮我们转发到页面。</li>
</ol>
<h5 id="RequestMapping-注解"><a href="#RequestMapping-注解" class="headerlink" title="@RequestMapping 注解"></a>@RequestMapping 注解</h5><p>就是告诉SpringMVC，这个方法用来处理什么请求；</p>
<p><code>@RequestMapping(&quot;/hello&quot;)</code>中的”/“是可以省略的，即使省略了，也默认从当前项目开始。</p>
<p>后面还有关于 @RequestMapping 的更详细的介绍</p>
<h5 id="能否不指定配置文件位置？"><a href="#能否不指定配置文件位置？" class="headerlink" title="能否不指定配置文件位置？"></a>能否不指定配置文件位置？</h5><p>如果不指定配置文件位置，springMVC 则会默认去找 <strong>/WEB-INF/xxx-servlet.xml</strong> 文件，这个 <strong>xxx</strong> 是指在web.xml 中配置的<strong>前端控制器对象名</strong>。</p>
<h5 id="为啥当我们创建-index-html-文件并访问时，会报-404-的错误"><a href="#为啥当我们创建-index-html-文件并访问时，会报-404-的错误" class="headerlink" title="为啥当我们创建 index.html 文件并访问时，会报 404 的错误?"></a>为啥当我们创建 index.html 文件并访问时，会报 404 的错误?</h5><p>原因：所有的项目的 web.xml 都是继承自 Tomcat 服务器的web.xml，所以本来所有的请求都应交给 Tomcat 处理（Tomcat 会根据请求去本地对应的地方获取资源，然后响应回去）。但是我们配置前端控制器的时候，为其配置了 <strong>url-patter=/</strong> ，而Tomcat默认的 url-patter 也是 /。 这样的话，几乎所有请求都会被交给<strong>前端控制器</strong>处理，而不是 Tomcat。而由于前端控制器，没有找到 @RequestMapping 标注 /index.html 的方法，于是会返回 404。</p>
<p>解决：<a target="_blank" rel="noopener" href="https://blog.csdn.net/u012730299/article/details/51872704">SpringMVC访问静态资源的三种方式</a>。</p>
<blockquote>
<p>为啥请求 index.html 同目录下的 index.jsp 则能正常访问？</p>
<ul>
<li>我们配置的 url-patter=/ 不足以匹配到 *.jsp，而需要 <code>/*</code> 才能匹配到。</li>
</ul>
</blockquote>
<h2 id="RequestMapping-请求映射"><a href="#RequestMapping-请求映射" class="headerlink" title="@RequestMapping 请求映射"></a>@RequestMapping 请求映射</h2><h3 id="使用-RequestMapping-注解来映射请求"><a href="#使用-RequestMapping-注解来映射请求" class="headerlink" title="使用 @RequestMapping 注解来映射请求"></a>使用 @RequestMapping 注解来映射请求</h3><ul>
<li><p>Spring MVC 使用 @RequestMapping 注解为控制器指定可以处理<strong>哪些</strong> URL 请求；</p>
</li>
<li><p>在控制器的类定义及方法定义处都可标注 @RequestMapping；</p>
<ul>
<li>类定义处∶提供初步的请求映射信息。相对于 WEB 应用的根目录；</li>
<li>方法处∶提供进一步的细分映射信息。相对于类定义处的 URL。若类定义处未标注 @RequestMapping ，则方法处标记的 URL 相对于 WEB 应用的根目录。</li>
</ul>
</li>
<li><p>DispatcherServlet 截获请求后，就通过控制器上 @RequestMapping，提供的映射信息确定请求所对应的处理方法；</p>
</li>
<li><p><strong>一个方法处理一个请求</strong>。</p>
</li>
</ul>
<h3 id="RequsetMapping-的属性介绍"><a href="#RequsetMapping-的属性介绍" class="headerlink" title="@RequsetMapping 的属性介绍"></a>@RequsetMapping 的属性介绍</h3><ul>
<li><p>value：指定可以处理哪些 URL 请求。例如：<code>@RequestMapping(&quot;/hello&quot;)</code> ；</p>
</li>
<li><p>method：限定请求方式；</p>
<ul>
<li>HTTP协议定义的请求方式有： <strong>GET</strong>, <strong><em>POST</em></strong>, HEAD, OPTIONS, PUT, DELETE, TRACE 和 CONNECT；</li>
<li>默认是所有请求都可以接受；</li>
<li>例如:<code>@RequestMapping(value=&quot;/hello&quot;,method=RequestMethod.Post)</code>，表示限定只接受post请求.</li>
</ul>
</li>
<li><p>params：规定请求参数；</p>
<ul>
<li>支持简单的表达式；</li>
<li><code>params=&#123;&quot;param1&quot;&#125;</code>：表示请求参数<strong>必须</strong>包含有 param1 请求参数；<ul>
<li>例如：<code>@RequestMapping(value=&quot;/hello&quot;,params=&#123;&quot;username&quot;&#125;)</code>，表示发送请求的时候必须带上一个名为 username 的参数，没带则返回 404。</li>
</ul>
</li>
<li><code>params=&#123;&quot;!param&quot;&#125;</code>：表示请求参数<strong>不能</strong>包含有 param1 请求参数；<ul>
<li>例如：<code>@RequestMapping(value=&quot;/hello&quot;,params=&#123;&quot;!username&quot;&#125;)</code>，表示发送请求的时候必须不能带有名为 username 的参数，否则 404。</li>
</ul>
</li>
<li><code>params=&#123;&quot;param1!=value1&quot;&#125;</code>：表示请求包含名为 parma1 的请求参数，但其值不能为value1，没有param1 请求参数也可；<ul>
<li>eg:<code>@RequestMapping(value=&quot;/hello&quot;,params=&#123;&quot;username!=123&quot;&#125;)</code>，表示发送请求的时候 username 参数的值不能为 123，否则 404</li>
</ul>
</li>
<li><code>.params=&#123;&quot;param1&quot;,&quot;!prama2&quot;&#125;</code>:请求必须包含 param1参数且不能包含 parma2 参数；<ul>
<li>eg:<code>@RequestMapping(value=&quot;/hello&quot;,params=&#123;&quot;username&quot;,&quot;!pwd&quot;&#125;)</code>，表示请求必须包含 username 参数且不能包含 pwd 参数，否则 404。</li>
</ul>
</li>
</ul>
</li>
<li><p>headers：规定请求头；</p>
<ul>
<li>也支持简单的表达式；</li>
<li>例如：<code>headers=&#123;&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/84.0.4147.135 Safari/537.36&quot;&#125;</code>；</li>
</ul>
</li>
<li><p>consumes：只接受内容类型是那种的请求，规定请求头中的 Content-Type；</p>
</li>
<li><p>produces：告诉浏览器返回的内容类型是什么，给响应头中加上 Content-Type:text/html;charset=utf-8。</p>
</li>
</ul>
<h3 id="支持-Ant-风格资源地址"><a href="#支持-Ant-风格资源地址" class="headerlink" title="支持 Ant 风格资源地址"></a>支持 Ant 风格资源地址</h3><ul>
<li><p>Ant风格资源地址支持3种匹配符:</p>
<ul>
<li><code>?</code>：匹配文件名中的一个字符；</li>
<li><code>*</code>：匹配文件名中的任意字符；</li>
<li><code>*</code>：**匹配多层路释。</li>
</ul>
</li>
<li><p>@RequestMapping还支持Ant风格的URL:</p>
<ul>
<li><code>/user/*/createUser</code>：匹配 /user/aaa/createUser、/user/bbb/createUser 等URL；</li>
<li><code>/user/**/lcreateUser</code>：匹配 /user/createUser、/user/aaa/bbb/createUser 等URL；</li>
<li><code>/user/createUser??</code>：匹配 /user/createUseraa，/user/createUserbb 等URL。</li>
</ul>
</li>
</ul>
<h3 id="使用-PathVariable-注解映射-URL-绑定的占位符"><a href="#使用-PathVariable-注解映射-URL-绑定的占位符" class="headerlink" title="使用 @PathVariable 注解映射 URL 绑定的占位符"></a>使用 @PathVariable 注解映射 URL 绑定的占位符</h3><ul>
<li><strong>带占位符的 URL是 Spring3.0 新增的功能</strong>，该功能在 SpringMVC 向 **REST **目标挺进发展过程中具有里程碑的意义；</li>
<li><strong>通过 @PathVariable 可以将 URL 中占位符参数绑定到控制器处理方法的入参中</strong>：URL 中的 {xxx} 占位符可以通过 PathVariable(“xxx”) 绑定到操作方法的入参；</li>
</ul>
<p>示例:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot; /delete/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">delete</span><span class="params">(<span class="meta">@PathVariable( &quot;id&quot;)</span> Integer id)</span></span>&#123;</span><br><span class="line">    UserDao.deLete(id);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;redirect:/user/list.action&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="请求参数的映射"><a href="#请求参数的映射" class="headerlink" title="请求参数的映射"></a>请求参数的映射</h2><h3 id="普通请求参数"><a href="#普通请求参数" class="headerlink" title="普通请求参数"></a>普通请求参数</h3><p>我们可以注意到，在 Controller 中，似乎没有提供 ServletRequest 给我们来获取参数，那么我们该如何获取请求中的参数呢？</p>
<ul>
<li><strong>默认方式</strong>。直接给方法参数列表上<strong>写一个和请求参数名相同的变量</strong>。这个参数就来接收请求参数的值；<strong>若是请求时，没带入参(参数列表)的值，则为null</strong>。</li>
<li><strong>@RequestParam</strong> ：获取请求参数的值。默认被注解的参数是必须带的；<ul>
<li>示例：<code>public String method(@RequestParam(&quot;user&quot;)String username)&#123;...&#125;</code> 等同于 <code>String username = request.getParamter(&quot;user&quot;);</code> ；</li>
<li>@RequestParam 的三个属性：<ul>
<li>value：指定要获取的参数的key；</li>
<li>required：这个参数是否是必须的，默认是必须的；</li>
<li>defaultValue：默认值，不指定默认值则是 null。</li>
</ul>
</li>
<li>与 @PathVariable 对比；<ul>
<li>@PathVariable 是获取<strong>请求路径</strong>中的值；</li>
<li>@RequestParam是获取<strong>请求参数</strong>中的值；</li>
<li>例如：<code>/book/&#123;user&#125;?user=addmin</code>，{user} 是 <strong>@PathVariable</strong> 能获取的值，user=admin 是 <strong>@RequestParam</strong> 能获取的值。</li>
</ul>
</li>
</ul>
</li>
<li><strong>@RequestHeader</strong>：获取请求头中的某个key的值；<ul>
<li>例如：<code>public String handle01(@RequestHeader(&quot;User-Agent&quot;)String userAgent)&#123;...&#125;</code> 等效于 <code>userAgent=request.getHeader(&quot;User-Agent&quot;);</code>；</li>
<li>如果请求头中没有指定的参数，则默认会报错；</li>
<li>@RequestHeader 的三个属性：<ul>
<li>value：指定要获取的参数的key；</li>
<li>required：这个参数是否是必须的，默认是必须的；</li>
<li>defaultValue：默认值，不指定默认是null。</li>
</ul>
</li>
</ul>
</li>
<li><strong>@CookieValue</strong>：获取某个Cookie的值；<ul>
<li>例如：<code>public String handle01(@CookieValue(&quot;JSESSIONID&quot;)String jid)&#123;...&#125;</code> ；</li>
<li>当我们第一次访问的时候，是没有 JSESSINOID 的，这样默认情况下回报错。跟前面的@RequestHeader，@RequestParam 一样可以设置一些属性来解决；</li>
<li>@CookieValue 的三个属性：<ul>
<li>value：指定要获取的参数的key；</li>
<li>required：这个参数是否是必须的，默认是必须的；</li>
<li>defaultValue：默认值，不指定默认是null。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="请求参数是某个对象对应的属性"><a href="#请求参数是某个对象对应的属性" class="headerlink" title="请求参数是某个对象对应的属性"></a>请求参数是某个对象对应的属性</h3><p>如果我们的请求参数与一个 POJO 对应，那么 SpringMVC 会自动为这个 POJO 进行赋值；</p>
<ul>
<li>将 POJO 中的每个属性，从 request 参数中尝试获取出来，并封装；</li>
<li>还可以级联封装，属性是个对象，封装该对象的属性。</li>
</ul>
<p>示例：</p>
<ul>
<li><p>定义一个图书表单：（注意级联属性的 name）</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/addBook&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    书名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;bookName&quot;</span> /&gt;</span></span><br><span class="line">    作者：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;author&quot;</span> /&gt;</span></span><br><span class="line">    价格：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;price&quot;</span> /&gt;</span></span><br><span class="line">    库存：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;stock&quot;</span> /&gt;</span></span><br><span class="line">    销量：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sales&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 级联封装的属性 --&gt;</span></span><br><span class="line">    省：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;address.province&quot;</span> /&gt;</span></span><br><span class="line">    市：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;address.city&quot;</span> /&gt;</span></span><br><span class="line">    街道：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;address.street&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>定义图书的 pojo 类 和 地址的 pojo 类，无参构造，getter 和 setter 方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Book</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String bookName;</span><br><span class="line">    <span class="keyword">private</span> String author;</span><br><span class="line">    <span class="keyword">private</span> Double price;</span><br><span class="line">    <span class="keyword">private</span> String stock;</span><br><span class="line">    <span class="keyword">private</span> Integer sales;</span><br><span class="line">    <span class="keyword">private</span> Address address;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Book</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">    <span class="comment">// getter and setter</span></span><br><span class="line">    <span class="comment">// toString()</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Address</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String province;</span><br><span class="line">    <span class="keyword">private</span> String city;</span><br><span class="line">    <span class="keyword">private</span> String street;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Address</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">    <span class="comment">// getter and setter</span></span><br><span class="line">    <span class="comment">// toString()</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Controller 类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">demo</span></span>&#123;</span><br><span class="line">    <span class="meta">@RequestMappin(&quot;/addBook&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">addBook</span><span class="params">(Book book)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;要保存的图书：&quot;</span>+book)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<blockquote>
<p>注意：本例中，没有解决中文乱码问题</p>
</blockquote>
<h3 id="解决请求参数乱码问题"><a href="#解决请求参数乱码问题" class="headerlink" title="解决请求参数乱码问题"></a>解决请求参数乱码问题</h3><h4 id="请求乱码"><a href="#请求乱码" class="headerlink" title="请求乱码"></a>请求乱码</h4><ol>
<li><p>get 请求方式乱码：改 server.xml（tomcat8 已经将 get 方式的中文乱码问题解决了），<code>&lt;Connector&gt;</code>标签添加属性 URIEncoding=”UTF-8”；</p>
</li>
<li><p>post 请求方式乱码：</p>
<ol>
<li><p>可以在第一次请求参数之前设置：<code>rqeust.setCharacterEncoding(&quot;utf-8&quot;);</code>；</p>
</li>
<li><p>我们可以自己写一个 Filter，在过滤器中处理乱码；</p>
</li>
<li><p>我们也可以直接使用 SpringMVC 提供的 Filter（<strong>CharacterEncodingFilter</strong>），在 web.xml 配置好即可；</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>characterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 指定编码 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- forceEncoding：顺手解决响应乱码 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>forceEncoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filte-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>characterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-patter</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-patter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filte-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>



</li>
</ol>
</li>
</ol>
<h4 id="响应乱码"><a href="#响应乱码" class="headerlink" title="响应乱码"></a>响应乱码</h4><ul>
<li>使用：<code>reqsponse.setContentType(&quot;text/html;charset=utf-8&quot;);</code></li>
<li>使用：SpringMVC 提供的 <code>CharacterEncodingFilter</code> 过滤器。</li>
</ul>
<blockquote>
<p> <strong>注意：字符编码的Filter一般要在其它Filter之前，即在web.xml文件中其它filter的上面</strong>。</p>
</blockquote>
<h3 id="SpringMVC-如何使用原生API"><a href="#SpringMVC-如何使用原生API" class="headerlink" title="SpringMVC 如何使用原生API"></a>SpringMVC 如何使用原生API</h3><p>如果我们像在 Contoller 的方法中使用原生 API，那么我们可以通 API 作为方法的形参即可；</p>
<p>可以使用的原生 API 有：</p>
<ul>
<li><strong>HttpServletRequest</strong>；</li>
<li><strong>HttpServletResponse</strong>；</li>
<li><strong>HttpSession</strong>；</li>
<li>java.security.Principal；</li>
<li>Locale：国际化有关的区域信息；</li>
<li>InputStream：文件上传时使用，<code>ServletInputStream inpurstream = reqeust.getInputStream();</code> ；</li>
<li>OutputStream：文件下载时使用，<code>ServletOutputStream outputStream = response.getOutputStream();</code> ；</li>
<li>Reader：从 request 中获取读的字符流，<code>BufferdReader reader = reqeust.getReader();</code> ；</li>
<li>Writer：从 response 中获取写的字符流，<code>BufferdWriter writer = response.getWriter();</code> ；</li>
</ul>
<p>示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ReqeustMapping(&quot;/handle03&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">handle</span><span class="params">(HttepSEssion session, HttpServletReqest reqeust)</span></span>&#123;</span><br><span class="line">    request.setAttribute(<span class="string">&quot;reqParam1&quot;</span>,  <span class="string">&quot;reqValue1&quot;</span>);</span><br><span class="line">    session.setAttribute(<span class="string">&quot;sessionParam1&quot;</span>, <span class="string">&quot;sessionValue1&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="处理模型数据–数据输出到页面"><a href="#处理模型数据–数据输出到页面" class="headerlink" title="处理模型数据–数据输出到页面"></a>处理模型数据–数据输出到页面</h2><p>SpringMVC 如何将数据带给页面?</p>
<ol>
<li><p>可在方法处传入 Map、Model 或 ModelMap 对象。这些参数里面保存的所有数据都会放在域中，可以被页面获取;</p>
<ul>
<li><p>都会存入请求域中；</p>
</li>
<li><p>Map、Model 和ModelMap 的关系，它们最终都是 BindingAwareModelMap 在工作，相当于给BindingAwareModelMap 中保存的东西都会被放在<strong>请求域</strong>中；</p>
</li>
<li><p>示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/postBack01&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">postBack01</span><span class="params">(Map&lt;String, Object&gt; map)</span></span>&#123;</span><br><span class="line">    map.put(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;你好&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;map的类型：&quot;</span>+map.getClass());</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;output/postBack&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/postBack02&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">postBack02</span><span class="params">(Model model)</span></span>&#123;</span><br><span class="line">    model.addAttribute(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;你好呀&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;model的类型：&quot;</span> + model.getClass());</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;output/postBack&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/postBack03&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">postBack03</span><span class="params">(ModelMap modelMap)</span></span>&#123;</span><br><span class="line">    modelMap.addAttribute(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;你好呀!&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;modelMap的类型：&quot;</span> + modelMap.getClass());</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;output/postBack&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>可以把方法返回值变为 ModelAndView 类型；</p>
<ul>
<li><p>即包含视图信息（页面地址），也包含模型数据（给页面带的数据）；</p>
</li>
<li><p>数据是同样是存放在请求域中；</p>
</li>
<li><p>示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/postBack04&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">postBack04</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// 之前我们返回的字符串就叫视图名，</span></span><br><span class="line">    ModelAndView view = <span class="keyword">new</span> ModelAndView(<span class="string">&quot;output/postBack&quot;</span>);</span><br><span class="line">    view.addObject(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;嘿嘿&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> view;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>SpringMVC 提供了一种可以临时给 Session 域中保存数据的方式——使用注解 <strong>@SessionAttributes</strong>（只能标在类上）；</p>
<ul>
<li><p>它会给 BindingAwareModelMap 或 ModelAndView 中保存的数据，同时给 Session 中放一份；</p>
</li>
<li><p>该注解的两个属性：</p>
<ul>
<li><p>value：指定保存数据时，要给 sessin 中放的数据；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// @SessionAttributes(value=&quot;msg&quot;)</span></span><br><span class="line"><span class="meta">@SessionAttributes(value=&#123;&quot;msg&quot;，&quot;error&quot;&#125;)</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoController</span></span>&#123;&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>class：只要保存的指定的类型的数据，就给 Session 中也保存一份；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// @SessionAttributes(type=String.class)</span></span><br><span class="line"><span class="meta">@SessionAttributes(type=&#123;String.class, Integer.class&#125;)</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoController</span></span>&#123;&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>两个属性可混合使用。</p>
</li>
</ul>
<blockquote>
<p>要给 session 中放数据，<strong>最好还是用原生 API</strong>，@SessionAttribute 可能会引发一些异常。</p>
</blockquote>
</li>
<li><p>使用 @ModelAttribute 注解；</p>
<ul>
<li>在<strong>方法入参</strong>标值该注解后，spring 就不会在 new 一个对象，而是在域中取出对应的数据；</li>
<li>标注在<em>方法</em>上，这个方法就会提前于目标方法，先运行。并<strong>把方法的运行结果放在隐含模型中</strong>。</li>
<li>放的时候会使用一个key：<ul>
<li>例如 @ModelAttribute(“book”) 指定了 key，就用指定的book</li>
<li>如果没指定，就用返回值类型的首字母小写。</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2 id="SpringMVC九大组件"><a href="#SpringMVC九大组件" class="headerlink" title="SpringMVC九大组件"></a>SpringMVC九大组件</h2><p>DispatcheerServlet 中有9个引用类型的属性，即SpringMVC九大组件：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**MultipartResolver used by this servlet*/</span></span><br><span class="line"><span class="keyword">private</span> MultipartResolver multipartResolver;  <span class="comment">// 文件上传解析器</span></span><br><span class="line"><span class="comment">/**LocaleResolver used by this servlet */</span></span><br><span class="line"><span class="keyword">private</span> LocaleResolver localeResolver;  <span class="comment">// 区域信息解析器，和国际和有关</span></span><br><span class="line"><span class="comment">/**ThemeResolver used by this servlet */</span></span><br><span class="line"><span class="keyword">private</span> ThemeResolver themeResolver;  <span class="comment">// 主题解析器：强大的主题效果更换</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**List of HandlerMappings used by this servlet*/</span></span><br><span class="line"><span class="keyword">private</span> List&lt;HandlerMapping&gt; handlerMappings;  <span class="comment">// Handler映射信息，handlerMappings</span></span><br><span class="line"><span class="comment">/** List of HandlerAdapters used by this servlet */</span></span><br><span class="line"><span class="keyword">private</span> List&lt;HandlerAdater&gt; handlerAdapters;  <span class="comment">// Handler的适配器</span></span><br><span class="line"><span class="comment">/** List of HandlerExceptionResolvers used by this servlet */</span></span><br><span class="line"><span class="keyword">private</span> List&lt;HandlerExceptionResolver&gt; handlerExceptionResolvers;  <span class="comment">// SpringMVC强大的异常解析功能，异常解析器</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**RequestToViewNameTranslator used by this servlet */</span></span><br><span class="line"><span class="keyword">private</span> RequestToViewNameTranslator viewNameTranslator;  <span class="comment">// 没啥用</span></span><br><span class="line"><span class="comment">/**FlashMapManager used by this servlet */</span></span><br><span class="line"><span class="keyword">private</span> FlashMapManager flashMapManager;  <span class="comment">// SpringMVC 中允许重定向携带数据的功能</span></span><br><span class="line"><span class="comment">/**List of ViewResolvers used by this servlet */</span></span><br><span class="line"><span class="keyword">private</span> List&lt;ViewResolver&gt; viewResolvers;  <span class="comment">// 视图解析器</span></span><br></pre></td></tr></table></figure>

<p>SpringMVC在工作的时候，关键位置都是由这些组件完成；</p>
<p>共同点：全都是接口，提供了非常强大的扩展性。</p>
<p>其初始化：DispatcherServlet 的九大组件初始化的方法；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">initstrategies</span><span class="params">(ApplicationContext context)</span> i</span></span><br><span class="line"><span class="function">    <span class="title">initMultipartResolver</span><span class="params">(context)</span></span>;</span><br><span class="line">    initLocaleResolver(context);</span><br><span class="line">    initThemeResolver(context);</span><br><span class="line">    initHandlerMappings(context);</span><br><span class="line">    initHandlerAdapters(context);</span><br><span class="line">    initHandlerExceptionResolvers(context);</span><br><span class="line">    initRequestToViewNameTranslator(context);</span><br><span class="line">    initViewResolvers(context);</span><br><span class="line">    initFlashMapManager(context);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>组件的初始化，去容器中找到这个组件，如果没有找到就用默认的配置；</p>
<ul>
<li>但是有些组件是根据是使用类型找的，有些是使用id找的。</li>
</ul>
<h2 id="视图和视图解析器"><a href="#视图和视图解析器" class="headerlink" title="视图和视图解析器"></a>视图和视图解析器</h2><h3 id="视图和视图解释器介绍"><a href="#视图和视图解释器介绍" class="headerlink" title="视图和视图解释器介绍"></a>视图和视图解释器介绍</h3><ol>
<li>方法执行后返回值会作为页面地址参考，转发或是重定向到页面；</li>
<li>视图解析器可能会进行页面地址的拼串；</li>
</ol>
<blockquote>
<p>视图解析器只是为了得到视图对象；视图对象才能真正转发或重定向到指定页面；<br><strong>视图对象才能真正渲染视图</strong>。</p>
</blockquote>
<h3 id="SpringMVC-处理视图对象流程"><a href="#SpringMVC-处理视图对象流程" class="headerlink" title="SpringMVC 处理视图对象流程"></a>SpringMVC 处理视图对象流程</h3><p><img src="https://cdn.jsdelivr.net/gh/luxnln/cdn@main/img/Java/Frame/SpringMVC/SpringMVC%E5%A4%84%E7%90%86%E8%A7%86%E5%9B%BE%E5%AF%B9%E8%B1%A1%E7%A4%BA%E6%84%8F%E5%9B%BE.jpg" alt="SpringMVC处理视图对象示意图"></p>
<p>说明：</p>
<ul>
<li>请求处理方法执行完成后，最终返回一个 ModelAndView 对象。对于那些返回 String , View 或 ModelMap  等类型的处理方法，SpringMVC 也会在内部将它们装配成一个 ModelAndView 对象，它包含了逻辑名和模型对象的视图；</li>
<li>SpringMVC 借助视图解析器（ViewResolver）得到最终的视图对象（View）最终的视图可以是 JSP ,也可能是Excel、JFreeChart 等各种表现形式的视图；</li>
<li>对于最终究竟采取何种视图对象对模型数据进行渲染，处理器并不关心，<strong>处理器工作重点聚焦在生产模型数据的工作上</strong>，从而实现MVC的充分解耦。</li>
</ul>
<h3 id="使用-view-controller-将请求映射一个页面"><a href="#使用-view-controller-将请求映射一个页面" class="headerlink" title="使用 view-controller 将请求映射一个页面"></a>使用 view-controller 将请求映射一个页面</h3><p>有时候，我们发起一个请求，只是为了去一个页面，不需要做处理。而在 Controller 类中专门创建一个方法来进行跳转显然是不太好的。另外，我们的页面资源一般都在 <strong>/WEB-INF/</strong> 下不可能通过a标签之类的链接的形式跳转。</p>
<p>我们可是使用 <code>view-controller&gt;</code> 标签，来控制一个请求直接到对应目录下的页面：</p>
<ul>
<li>例如：<code>&lt;mvc:view-controller path=&quot;/toLoginPage&quot; view-name=&quot;login&quot;/&gt;</code> ；当页面发起 /toLoginPage 请求时，直接响应 WEB-INF 下的 login 页面；<ul>
<li>path：指定哪个请求；</li>
<li>view-name：指定映射给哪个视图。</li>
</ul>
</li>
<li>但是，当我们使用了 view-controller 标签后，其它 Controller 的请求，就会出问题；<ul>
<li>解决方法：开启 mvc 注解驱动模式 <code>&lt;mvc:annotation-driven/&gt;</code> ；</li>
</ul>
</li>
</ul>
<h3 id="forword-和-redirect-前缀的使用"><a href="#forword-和-redirect-前缀的使用" class="headerlink" title="forword 和 redirect 前缀的使用"></a>forword 和 redirect 前缀的使用</h3><p>当我们需要明确是转发还是重定向的时候，可以在视图名前加 forword 或 redirect 前缀；</p>
<ul>
<li>并且加了前缀后，不会再被视图解析器拼串。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;handel02&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">handel02</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// 使用相对路径访问 /index.jsp页面</span></span><br><span class="line">    <span class="comment">// 因为在 springmvc.xml 中配置了 InternalResourceViewResolver，自动拼串。</span></span><br><span class="line">    <span class="comment">// 如果返回值是 &quot;index&quot; 会被拼成 /WEB-INF/pages/index.jsp</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;../../demo2&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * forward：转发到某个页面</span></span><br><span class="line"><span class="comment"> * forward：/demo2.jsp 转发到当前项目下的 demo2.jsp 页面</span></span><br><span class="line"><span class="comment"> * 同时，它不会被 InternalResourceViewResolver 拼串</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 一定要加上“/”，如果不加“/”就是相对路径，容易出问题</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * forward 前缀也可以转发一个请求，例如：`forward:handel02`</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;handel03&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">handel03</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;forward:/demo2.jsp&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 重定向到demo2.jsp页面</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 转发：`forward:转发路径`</span></span><br><span class="line"><span class="comment"> * 重定向：`redirect:重定向的路径`</span></span><br><span class="line"><span class="comment"> *   原生的 Servlet 重定向 `/路径` 前需要加上项目虚拟路径才能成功，因为是浏览器负责解析；</span></span><br><span class="line"><span class="comment"> *   例如：`response.sendRedirect(contextPath+&quot;/demo2.jsp&quot;);`</span></span><br><span class="line"><span class="comment"> *   而 SpringMVC 的 redirect 前缀会自动地拼接项目名。</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 重定向目的也能是一个请求，例如：`redirect:handel03`</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;handel04&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">handel04</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;redirect:/demo2.jsp&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="自定义视图解析器"><a href="#自定义视图解析器" class="headerlink" title="自定义视图解析器"></a>自定义视图解析器</h3><ul>
<li>视图解析器根据方法的返回值得到视图对象</li>
<li>多个视图解析器都会尝试能否得到视图对象</li>
<li>视图对象不同就可以具有不同功能</li>
</ul>
<p>自定义视图和视图解析器的步骤：</p>
<ol>
<li><p>编写自定义的视图解析器和视图实现类；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyResolver</span> <span class="keyword">implements</span> <span class="title">ViewResolver</span>, <span class="title">Ordered</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer order;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 根据试图名返回视图对象</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> View <span class="title">resolveViewName</span><span class="params">(String s, Locale locale)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// my:/demo1  forward:/demo1</span></span><br><span class="line">        <span class="keyword">if</span>(s.startsWith(<span class="string">&quot;my&quot;</span>))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> MyView();</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 获取视图的优先级，数字越小优先级越高</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getOrder</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> order;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 改变视图解析器的优先级</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setOrder</span><span class="params">(Integer order)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.order = order;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyView</span> <span class="keyword">implements</span> <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 返回数据的内容类型</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getContentType</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;text/html&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">render</span><span class="params">(Map&lt;String, ?&gt; map, HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;之前保存的数据：&quot;</span> + map);</span><br><span class="line"></span><br><span class="line">        httpServletResponse.getWriter().write(<span class="string">&quot;&lt;h1&gt;哈哈哈&lt;/h1&gt;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>视图解析器必须放在 IOC 容器中，例如：<code> &lt;bean class=&quot;com.demo.view.MyResolver&quot;&gt;&lt;property name=&quot;order&quot; value=&quot;1&quot;/&gt;&lt;/bean&gt;</code> ；</p>
</li>
</ol>
<blockquote>
<p>注意：InternalResourceViewResolve 的优先级默认是最低的 Integer.MAX_VALUE，我们自定义的解析器必须要比 InternalResourceViewResolve 高，否则，返回的返回值就会被 InternalResourceViewResolve 给拼串。</p>
</blockquote>
<h2 id="RESTful-风格的请求"><a href="#RESTful-风格的请求" class="headerlink" title="RESTful 风格的请求"></a>RESTful 风格的请求</h2><h3 id="REST-介绍"><a href="#REST-介绍" class="headerlink" title="REST 介绍"></a>REST 介绍</h3><ul>
<li>REST：即Representational State Transfer。（资源）表现层状态转化。是目前最流行的一种互联网软件架构。它结构清晰、符合标准、易于理解、扩展方便，所以正得到越来越多网站的采用；</li>
<li><strong>资源 (Resources )**：表示网络上的一个实体，或者说是网络上的一个具体信息。它可以是一段文本、一张图片、一首歌曲、一种服务，总之就是一个具体的存在。可以用一个 **URI（统一资源定位符）</strong>指向它，每种资源对应一个特定的 URI。要获取这个资源，访问它的 URI 就可以，因此 <strong>URI 即为每一个资源的独一无二的识别</strong>符；</li>
<li><strong>表现层 (Representation)**：</strong>把资源具体呈现出来的形式，叫做它的表现层(Representation )**。比如，文本可以用 txt 格式表现，也可以用 HTML 格式、XML 格式、JSON 格式表现，甚至可以采用二进制格式；</li>
<li><strong>状态转化 (State Transfer)**：每发出一个请求，就代表了客户端和服务器的一次交互过程。HTTP 协议，是一个无状态协议，即所有的状态都保存在服务器端。因此，如果客户端想要操作服务器，必须通过某种手段，让服务器端发生 “状态转化” (State Transfer )。而这种转化是建立在表现层之上的，所以就是 “表现层状态转化”。具体说，就是 **HITP协议里面，四个表示操作方式的动词: GET、POST、PUT、DELETE。它们分别对应四种基本操作：GET 用来获取资源，POST 用来新建资源，PUT 用来更新资源，DELETE 用来删除资源</strong>。</li>
</ul>
<h3 id="普通请求的-URL-与-REST-风格的-URL-地址请求对比"><a href="#普通请求的-URL-与-REST-风格的-URL-地址请求对比" class="headerlink" title="普通请求的 URL 与 REST 风格的 URL 地址请求对比"></a>普通请求的 URL 与 REST 风格的 URL 地址请求对比</h3><p>普通请求方式的 URL：</p>
<ul>
<li>/getBook?id=1：查询图书；</li>
<li>/deleteBook?id=1：删除1号图书；</li>
<li>/updateBooke?Id=1：更新1号图书；</li>
<li>/addBook：添加图书。</li>
</ul>
<p>Rest推荐：url 地址=&gt;/资源名/资源标识符：</p>
<ul>
<li>如果是以GET方式发起的请求，则表示查询1号图书；</li>
<li>如果是以POST方式发起的请求(/book)，则表示添加图书；</li>
<li>如果是以DELETE方式发起的请求，则表示删除1号图书；</li>
<li>如果是以PUT方式发起的请求，则表示更新1号图书。</li>
</ul>
<blockquote>
<p> 简洁的 URL 提交请求，以请求方式区分对资源操作。</p>
</blockquote>
<h3 id="SpringMVC-支持-RESTFul-请求"><a href="#SpringMVC-支持-RESTFul-请求" class="headerlink" title="SpringMVC 支持 RESTFul 请求"></a><strong>SpringMVC 支持 RESTFul 请求</strong></h3><p><strong>问题</strong>：从<strong>页面上只能发起两种请求</strong>：GET 和 POST，其它请求方法没法使用。<strong>那么如何从页面发起PUT和DELETE请求呢？</strong></p>
<p><strong>SpringMVC 对 REST封装的支持</strong></p>
<ol>
<li><p>SpringMVC 中有一个 Filter(<strong>HiddenHttpMethodFilter</strong>)，它可以<strong>把普通的请求转化为规定的请求</strong>；</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>hiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>hiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>如何使用它来发送其它形式的请求？</p>
<ol>
<li>创建一个post类型的表单；</li>
<li>表单项中携带一个_method请求参数；</li>
<li>这个_method的值就是 PUT 或 DELETE。</li>
</ol>
</li>
</ol>
<blockquote>
<p> 注意：高版本 Tomcat，使用 Spring 支持的 REST 有些问题，会出现 <code>405-JSPs only permit GET POST or HEAD</code>。</p>
<p>解决方案：</p>
<ul>
<li><code>&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; isErrorPage=&quot;true&quot; %&gt;</code>；</li>
<li>增加 <code>isErrorPage=&quot;true&quot;</code> 属性；</li>
<li>注意是在结果页面添加，也就是说在处理请求后要去的页面中，而不是请求时页面。</li>
</ul>
</blockquote>
<h4 id="使用示例"><a href="#使用示例" class="headerlink" title="使用示例"></a>使用示例</h4><ol>
<li><p>前端页面：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">&lt;!-- get 请求 --&gt;</span><br><span class="line">&lt;a href=&quot;books/1&quot;&gt;获取1号图书&lt;/a&gt;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- post 请求--&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;books&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;添加图书&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- post 请求但是根据 _method 参数会被HiddenHttpMethodFilter 转换成 put 请求，然后交给前端控制器处理 --&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;books/1&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;hidden&quot;</span> name=<span class="string">&quot;_method&quot;</span> value=<span class="string">&quot;PUT&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;更新1号图书&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- post 请求但是根据_method参数 会被HiddenHttpMethodFilter 转换成 delete 请求，然后交给前端控制器处理--&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;books/1&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;hidden&quot;</span> name=<span class="string">&quot;_method&quot;</span> value=<span class="string">&quot;DELETE&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;删除1号图书&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>web.xml 配置：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 通过 spring 提供的 HiddenHttpMethodFilter，来发起除 GET 和 POST 外的请求 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 注意 filter 和 servlet 在配置文件中的顺序 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>hiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>hiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">          SpringMVC 思想是有一个前端的控制器能拦截所有请求，并智能派发</span></span><br><span class="line"><span class="comment">          这个前端控制器是一个 servlet，应该在 web.xml中配置这个 servlet 来拦截所有请求</span></span><br><span class="line"><span class="comment">      --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- contextConfigLocation：指定 SpringMVC 配置文件位置 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- servlet 启动加载：servlet 原本是第一次访问时创建对象。设置了 &lt;load-on-startup&gt; 之后在服务启动时创建--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- /* 和 / 都是拦截所有请求，但是 /* 的范围更大，/* 还能拦截到 *.jsp 页面--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>springmvc.xml 配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc https://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.luxnln.demo.controller&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/page/&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>java 代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span>  <span class="comment">// 加注解@Controller，告诉SpringMVC这是一个处理器</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoController1</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/books/&#123;id&#125;&quot;, method = RequestMethod.GET)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">get</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;查询【&quot;</span> + id + <span class="string">&quot;】&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/books&quot;, method = RequestMethod.POST)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">post</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;添加&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/books/&#123;id&#125;&quot;, method = RequestMethod.PUT)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">put</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;更新【&quot;</span>+id+<span class="string">&quot;】&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/books/&#123;id&#125;&quot;, method = RequestMethod.DELETE)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">del</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;删除【&quot;</span>+id+<span class="string">&quot;】&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h2 id="SpringMVC-的表单标签-amp-处理静态资源"><a href="#SpringMVC-的表单标签-amp-处理静态资源" class="headerlink" title="SpringMVC 的表单标签 &amp; 处理静态资源"></a>SpringMVC 的表单标签 &amp; 处理静态资源</h2><h3 id="SpringMVC的表单标签"><a href="#SpringMVC的表单标签" class="headerlink" title="SpringMVC的表单标签"></a>SpringMVC的表单标签</h3><p>通过 SpringMVC 提供的<strong>表单标签</strong>可以实现将模型数据中的属性和 HTML 表单元素相绑定﹐以实现表单数据<strong>更便捷编辑和表单值的回显</strong>；</p>
<p>示例：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;form&quot;</span> uri=<span class="string">&quot;http://www.springframework.org/tags/form&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;demo&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;demo&lt;/h1&gt;</span><br><span class="line">&lt;%--</span><br><span class="line">    SpringMVC 提供的表单标签</span><br><span class="line">    * 通过 SpringMVC 的表单标签可以实现将模型数据中的属性和 HTML 表单元素相绑定﹐以实现表单数据更便捷编辑和表单值的回显。</span><br><span class="line"></span><br><span class="line">    SpringMVC认为：表单数据中的每一项最终都是要回显的：</span><br><span class="line">    * path 指定的是一个属性；这个属性是从隐含模型（请求与中取出某个对象中的属性）；</span><br><span class="line">    * path 指定的每一个属性，请求域中必须有一个对象，拥有这个属性；</span><br><span class="line">    * 这个对象就是 command 对象。</span><br><span class="line"></span><br><span class="line">    modelAttribute=<span class="string">&quot;&quot;</span>:</span><br><span class="line">    <span class="number">1.</span> 以前我们表单标签会从请求域中获取一个 command 对象；把这个对象的每一个属性显示出来；</span><br><span class="line">    <span class="number">2.</span> 可以告诉 SpringMVC 不要去取 comand 的值，我放了一个 modelAttribute 指定的值，取对象时用的 key 就用 modelAttribute 的值。</span><br><span class="line">    <span class="number">3.</span> 所以，在到该页面之前，需要先往 request 域中填充一个 employee 对象。</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;form:form action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/empUpdate&quot;</span> modelAttribute=<span class="string">&quot;employee&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    &lt;%--</span><br><span class="line">        path 就是原来 html-input 的 name 项，必须写；</span><br><span class="line">        作用:</span><br><span class="line">            <span class="number">1.</span> 当做原生的name项；</span><br><span class="line">            <span class="number">2.</span> 自动回显隐含模型中某个对象对应的属性值。</span><br><span class="line">    --%&gt;</span><br><span class="line">    lastName:&lt;form:input path=<span class="string">&quot;lastName&quot;</span>/&gt;&lt;br/&gt;</span><br><span class="line">    email:&lt;form:input path=<span class="string">&quot;email&quot;</span>/&gt;&lt;br/&gt;</span><br><span class="line">    gender:</span><br><span class="line">    男&lt;form:radiobutton path=<span class="string">&quot;gender&quot;</span> value=<span class="string">&quot;1&quot;</span>/&gt;</span><br><span class="line">    女&lt;form:radiobutton path=<span class="string">&quot;gender&quot;</span> value=<span class="string">&quot;0&quot;</span>/&gt;</span><br><span class="line">    &lt;br/&gt;</span><br><span class="line">    &lt;%--</span><br><span class="line">        items：指定要遍历的集合；自动遍历；</span><br><span class="line">        itemLabel=<span class="string">&quot;属性名&quot;</span>：指定遍历出这个对象的哪个属性是作为 option 标签体的值；</span><br><span class="line">        itemLabel=<span class="string">&quot;属性名&quot;</span>：指定遍历出这个对象的哪个属性是作为要提交的 value 值。</span><br><span class="line">    --%&gt;</span><br><span class="line">    dept: &lt;form:select path=<span class="string">&quot;department.id&quot;</span> items=<span class="string">&quot;$&#123;depts&#125;&quot;</span> itemLabel=<span class="string">&quot;departmentName&quot;</span> itemValue=<span class="string">&quot;id&quot;</span>/&gt;</span><br><span class="line">	&lt;%-- &lt;form:select path=<span class="string">&quot;department.id&quot;</span> itemLabel=<span class="string">&quot;departmentName&quot;</span> itemValue=<span class="string">&quot;id&quot;</span>/&gt; --%&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;保存&quot;</span>&gt;</span><br><span class="line">&lt;/form:form&gt;</span><br><span class="line"></span><br><span class="line">&lt;%-- 传统使用jstl实现</span><br><span class="line">&lt;form action=<span class="string">&quot;&quot;</span>&gt;</span><br><span class="line">    lastName：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;lastName&quot;</span>/&gt;&lt;br/&gt;</span><br><span class="line">    email：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;email&quot;</span>/&gt;&lt;br/&gt;</span><br><span class="line">    gender：</span><br><span class="line">        男&lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;gender&quot;</span> value=<span class="string">&quot;1&quot;</span>/&gt;</span><br><span class="line">        女&lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;gender&quot;</span> value=<span class="string">&quot;0&quot;</span>/&gt;</span><br><span class="line">    &lt;br/&gt;</span><br><span class="line">    部门：</span><br><span class="line">    &lt;select name=<span class="string">&quot;department.id&quot;</span>&gt;</span><br><span class="line">        &lt;c:forEach items=<span class="string">&quot;$&#123;depts&#125;&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;dept&quot;</span>&gt;</span><br><span class="line">            &lt;option value=&quot;$&#123;dept.id&#125;&quot;&gt;$&#123;dept.departmentName&#125;&lt;/option&gt;</span><br><span class="line">        &lt;/c:forEach&gt;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">    &lt;br/&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="处理静态资源"><a href="#处理静态资源" class="headerlink" title="处理静态资源"></a>处理静态资源</h3><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u012730299/article/details/51872704">SpringMVC访问静态资源的三种方式</a></p>
<h2 id="数据转换-amp-数据格式化-amp-数据校验"><a href="#数据转换-amp-数据格式化-amp-数据校验" class="headerlink" title="数据转换 &amp; 数据格式化 &amp; 数据校验"></a>数据转换 &amp; 数据格式化 &amp; 数据校验</h2><p>pringMVC封装自定义类型的时候：JavaBean 要和页面提交的数据进行一一绑定；</p>
<ul>
<li>页面提交的所有数据都是字符串；</li>
<li>Integer，Date 牵扯到以下操作；<ul>
<li>数据绑定期间的数据类型转换：String -&gt; Intger，String -&gt; Booealn；</li>
<li>数据绑定期间的数据格式化问题：birth=2017-12-15 -&gt; Date:2017/12/15  2017.12.15；</li>
</ul>
</li>
<li>数据校验；<ul>
<li>我们提交的数据必须是合法的；</li>
<li>前端校验：js+正则表达式；</li>
<li>后端校验：重要的数据也要后端校验。</li>
</ul>
</li>
</ul>
<h3 id="数据绑定流程"><a href="#数据绑定流程" class="headerlink" title="数据绑定流程"></a>数据绑定流程</h3><ol>
<li>SpringMVC 主框架将 ServletRequest 对象及目标方法的入参实例传递给 WebDataBinderFactory 实例，以创建 <strong>DataBinder</strong> 实例对象；</li>
<li>DataBinder 调用装配在 SpringMVC 上下文中的 <strong>ConversionService</strong> 组件进行<em>数据类型转换、数据格式化</em>工作。将 Servlet 中的请求信息填充到入参对象中；</li>
<li>调用 <strong>Validator</strong> 组件对已经绑定了请求消息的入参对象进行数据合法性校验﹐并最终生成数据绑定结果 <strong>BindingData</strong> 对象；</li>
<li>SpringMVC 抽取 <strong>BindingResult</strong> 中的入参对象和校验错误对象，将它们赋给处理方法的响应入参；</li>
<li>SpringMVC 通过反射机制对目标处理方法进行解析，将请求消息绑定到处理方法的入参中。数据绑定的核心部件是 <strong>DataBinder</strong> 。</li>
</ol>
<h3 id="自定义类型转换"><a href="#自定义类型转换" class="headerlink" title="自定义类型转换"></a>自定义类型转换</h3><p>SpringMVC 定义了 3 种类型的转换器接口，实现任意一个转换器接口都可以作为自定义转换器注册到 ConversionServiceFactroyBean 中:</p>
<ul>
<li>**Converter&lt;S,T&gt;**：将 S 类型对象转为 T 类型对象；</li>
<li>ConverterFactory：将相同系列多个 “同质” Converter 封装在一起。如果希望将一种类型的对象转换为另一种类型及其子类的对象（例如将 String 转换为 Number 及 Number 子类(Integer、Long、<br>Double 等)对象）可使用该转换器工厂类；</li>
<li>GenericConverter：会根据源类对象及目标类对象所在的宿主类中的上下文信息进行类型转换。</li>
</ul>
<p>示例：</p>
<ol>
<li><p>实现Converter接口，写一个自定义的类型转换</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">**</span><br><span class="line">*</span><br><span class="line">* Converter&lt;S, T&gt;</span><br><span class="line">* 两个返回</span><br><span class="line">*</span><br><span class="line">* S:Source</span><br><span class="line">* T:Target</span><br><span class="line">*</span><br><span class="line">* 讲S转为T</span><br><span class="line">*</span><br><span class="line">*/</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyStringToEmployeeConverter</span> <span class="keyword">implements</span> <span class="title">Converter</span>&lt;<span class="title">String</span>, <span class="title">Employee</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    DepartmentDao departmentDao;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 自定义转换规则</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> s 页面提交的要转换的字符串</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span> 转换后的Employee对象</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Employee <span class="title">convert</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;页面提交的要转换的字符串：&quot;</span> + s);</span><br><span class="line">        <span class="comment">// 规定格式为:empAdmin-admein@qq.com-1=101</span></span><br><span class="line">        Employee employee = <span class="keyword">new</span> Employee();</span><br><span class="line">        <span class="keyword">if</span>(s.contains(<span class="string">&quot;-&quot;</span>))&#123;</span><br><span class="line">            String[] split = s.split(<span class="string">&quot;-&quot;</span>);</span><br><span class="line">            employee.setLastName(split[<span class="number">0</span>]);</span><br><span class="line">            employee.setEmail(split[<span class="number">1</span>]);</span><br><span class="line">            employee.setGender(Integer.valueOf(split[<span class="number">2</span>]));</span><br><span class="line">            employee.setDepartment(departmentDao.getDepartment(Integer.valueOf(split[<span class="number">3</span>])));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> employee;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在 springmvc.xml 中配置 ConversionServcie;</p>
<ol>
<li>注意：Converter 是 ConversionService 中的组件；我们自定义的 Converter 得放进 ConversionService中；</li>
<li>将 WebDataBinder 中的 ConversionService 设置成我们这个加了自定义类型转换器的 ConversionService；</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 告诉SpringMVC别用默认的ConversionService，而是用我们自定义的ConversionService，可能有我们自定义的Converter--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;conversionService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.context.support.ConversionServiceFactoryBean&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- converters转换器中添加我们自定义的类型转换器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;converters&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.demo.contoller.CRUD.component.MyStringToEmployeeConverter&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>让 SpringMVC 使用我们自定义的 ConversionService；</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- conversion-service=&quot;conversionService&quot;，使用我们自己配置的类型转换组件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span> <span class="attr">conversion-service</span>=<span class="string">&quot;conversionService&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>



</li>
</ol>
<blockquote>
<p>总结：</p>
<pre><code>1. 实现Converter接口，写一个自定义的类型转换器
2. 将自定义的类型转换器配置在ConversionService中
3. 告诉SpringMVC用我们配置的ConversionService
</code></pre>
</blockquote>
<h3 id="数据格式化"><a href="#数据格式化" class="headerlink" title="数据格式化"></a>数据格式化</h3><ul>
<li>对属性对象的 输入/输出 进行格式化，从其本质上讲依然属于 “类型转换” 的范畴；</li>
<li>SpringMVC 在格式化模块中定义了一个<strong>实现 ConversionService 接口</strong>的 <strong>FormattingConversionService</strong> 实现类，该实现类<strong>扩展 GenericConversionService</strong>，因此它<strong>既具有类型转换的功能，又具有格式化的功能</strong>；</li>
<li><strong>FormattingConversionService</strong> 拥有一个 FormattingConversionServiceFactroyBean 工厂类，后者用于在Spring 上下文中构造前者；</li>
<li><strong>FormattingConversionServiceFactroyBean</strong> 内部已经注册了:<ul>
<li>NumberFormatAnnotationFormatterFactroy：支持对数字类型的属性使用 <code>@NumberFomat</code> 注解；</li>
<li>JodaDateTimeFormatAnnotationFormatterFactroy：支持对日期类型的属性使用 <code>@DateTimeformat</code> 注解；</li>
</ul>
</li>
<li>装配了 FormattingConversionServiceFactroyBean 后，就可以在 SpringMVC 入参绑定及模型数据输出时使用注解驱动了。<code>&lt;mvc:annotation-driven&gt;</code> 默认创建的 ConversionService 实例即为<strong>FormattingConversionServiceFactroyBean</strong> ；</li>
</ul>
<p>提示：在 <strong>ConversionServiceFactroyBean</strong> 中并没有 format 相关的功能，所以需要使用自定以转换器的时候建议在配置时使用 <strong>FormattingConversionSErviceFactoryBean</strong>，这样既具有自定义的类型转换，又能格式化</p>
<h4 id="日期格式化"><a href="#日期格式化" class="headerlink" title="日期格式化"></a>日期格式化</h4><p><strong>@DateTimeFormat 注解可对 java.util.Date、java.util.Calendar、java.long.Long 时间类型进行标注</strong>∶</p>
<ul>
<li><strong>patten</strong> 属性：类型为字符串。指定 解析/格式化字段数据 的模式，如: “yy-MM-dd hh:mm:ss”；</li>
<li>iso 属性：类型为DateTimeFormat.ISO。指定解析/格式化字段数据的ISO模式，包括四种：ISO.NONE(不使用）–默认、ISO.DATE(yyyy-MM-dd)、ISO.TIME(hh:mm:ss.sssz)、ISO.DATE_TIME(yyyy-MM-dd<br>hh:mm:ss.SS)；</li>
<li>style 属性：字符串类型。通过样式指定日期时间的格式，由两位字符组成，第一位表示日期的格式，第二位表示时间的格式：S:短日期/时间格式、M:中日期/时间格式、L:长日期/时间格式、F:完整日期/时间格式、-∶忽略日期或时间格式。</li>
</ul>
<h4 id="数字格式化"><a href="#数字格式化" class="headerlink" title="数字格式化"></a>数字格式化</h4><p>@NumberFormat可对类似数字类型的属性进行标注，它拥有两个互斥的属性:</p>
<ul>
<li>style：类型为 NumberFormat.Style。用于指定样式类型，包括三种:Style.NUMBER(正常数字类型）.Style.CURRENCY（货币类型）、Style.PERCENT（百分数类型）</li>
<li><strong>pattern</strong>：类型为String ，自定义样式;</li>
</ul>
<h3 id="数据校验"><a href="#数据校验" class="headerlink" title="数据校验"></a>数据校验</h3><p>只做前端校验是不安全的，<strong>在重要数据一定要加上后端验证</strong>；</p>
<p>使用：</p>
<ol>
<li>可以写程序将我们每一个数据取出进行验证，如果失败直接来到添加页面提示重新填写（pass，不使用）；</li>
<li>SpringMVC：可以利用<a href="#jsr303">JSR303</a>来做数据校验；<ul>
<li>JDBC：规范 — 实现（各个厂商的驱动包）；</li>
<li>JSR303：规范 — Hibernate Validator(第三方校验框架)；</li>
</ul>
</li>
<li>如何快速进行后端校验？<ol>
<li>导入校验框架包；<ul>
<li>hibernate-validator-cdi-6.1.5.Final.jar</li>
<li>hibernate-validator-annotation-processor-6.1.5.Final.jar</li>
<li>hibernate-validator-6.1.5.Final.jar</li>
<li>classmate-1.3.4.jar</li>
<li>jakarta.validation-api-2.0.2.jar</li>
<li>jboss-logging-3.3.2.Final.jar</li>
</ul>
</li>
<li>给 JavaBean 添加对应的校验注解即可；</li>
<li>在 SpringMVC 封装对象的时候，告诉 SpringMVC 这个对象需要校验；<ul>
<li>使用 <code>@Valid</code> 注解：<code>public String dispostRequestMethod(@Valid Employee employee)</code>；</li>
</ul>
</li>
<li>如何知道校验结果？<ul>
<li>给需要校验的 JavaBean 后面<strong>紧跟</strong>（两个参数之间不要有其它参数）一个 BindingResult。这个BindingResult 就是封装前一个 Bean 的校验结果，例如：<code>public String dispostRequestMethod(@Valid Employee employee, BindingResult result)</code></li>
</ul>
</li>
<li>根据校验结果，进行不同的处理；<ul>
<li><code>boolean result.hasErrors()</code>：校验是否有错误；</li>
<li>jsp 中使用 <code>&lt;form:errors path=&quot;&quot;/&gt;</code>，来做对应的错误提示。</li>
</ul>
</li>
</ol>
</li>
</ol>
<h4 id="JSR303"><a href="#JSR303" class="headerlink" title="JSR303"></a>JSR303</h4><ul>
<li>JSR303 是 Java 为 Bean 数据合法性校验提供的标准框架，它已经包含在 JavaEE6.0 中；</li>
<li>JSR303 通过在<strong>Bean属性上</strong>标注类似于 @NotNull、@Max 等标准的注解指定校验规则，并通过标准的验证接口对 Bean 进行验证。</li>
</ul>
<table>
<thead>
<tr>
<th align="left">注解</th>
<th align="left">功能说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left">@Nuil</td>
<td align="left">被往赶的元素必须为null</td>
</tr>
<tr>
<td align="left">@NotNull</td>
<td align="left">被注释的元素必须不为null</td>
</tr>
<tr>
<td align="left">@AssertTrue</td>
<td align="left">被注释的元茶必须为true</td>
</tr>
<tr>
<td align="left">@AssertFalse</td>
<td align="left">被注释的元素必须为false</td>
</tr>
<tr>
<td align="left">@Min(value)</td>
<td align="left">被注释的元素必须是一个数字，其值必须大于等于指定的最小值</td>
</tr>
<tr>
<td align="left">@Max(value)</td>
<td align="left">被注释的完素必须是一个数字，其值必须小于等）指定的最天值</td>
</tr>
<tr>
<td align="left">@DecimaiMin(value)</td>
<td align="left">被注释的完素必须是一个数字，其值必须大于等子指定的最小值</td>
</tr>
<tr>
<td align="left">@DecimalMax(value)</td>
<td align="left">被注释的完基必须是一个数字，其值必须小于等子指定的最天值</td>
</tr>
<tr>
<td align="left">@size(max, min)</td>
<td align="left">被注释的元素的大小必须在指定的范围内</td>
</tr>
<tr>
<td align="left">@Digits(integer. fraction)</td>
<td align="left">被注释的元素必须是一个数字，其值必须在可接受的范围内</td>
</tr>
<tr>
<td align="left">@Past</td>
<td align="left">被注释的元素必须是一个过去的日期</td>
</tr>
<tr>
<td align="left">@Future</td>
<td align="left">被注释的元素必须是一个将来的日期</td>
</tr>
<tr>
<td align="left">@Pattern(value)</td>
<td align="left">被注释的元素必须符合指定正则表达式</td>
</tr>
</tbody></table>
<h4 id="Hibernate-Validator"><a href="#Hibernate-Validator" class="headerlink" title="Hibernate Validator"></a>Hibernate Validator</h4><p>Hibernate Validator是JSR 303的一个参考实现，除支持所有标准的校验注解外，它还支持以下的扩展注解；</p>
<table>
<thead>
<tr>
<th align="left">注解</th>
<th align="left">功能说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left">@Email</td>
<td align="left">被注释的元素必须是电子邮箱地址</td>
</tr>
<tr>
<td align="left">@Length</td>
<td align="left">被注释的字符串的大小必须在指定的范围内</td>
</tr>
<tr>
<td align="left">@NotEmpty</td>
<td align="left">被注释的字符串的必须菲空</td>
</tr>
<tr>
<td align="left">@Range</td>
<td align="left">被注释的元素必须在合适的范围内</td>
</tr>
</tbody></table>
<h4 id="原生表单怎么得到错误信息？"><a href="#原生表单怎么得到错误信息？" class="headerlink" title="原生表单怎么得到错误信息？"></a>原生表单怎么得到错误信息？</h4><p>将错误消息放在SpringMVC隐藏域中。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ReqeuestMapping(&quot;add&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">addEmp</span><span class="params">(<span class="meta">@Valid</span> Employee employee, BindingResult result, Model model)</span></span>&#123;</span><br><span class="line">    System.out.println(employee);</span><br><span class="line">    Map&lt;String, Object&gt; errorsMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    <span class="keyword">if</span> (result.hasErrors())&#123;</span><br><span class="line">        List&lt;FieldError&gt; errors = result.getFieldErrors();</span><br><span class="line">        <span class="keyword">for</span>(FieldError error: errors)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;错误提示信息：&quot;</span>+error.getDefaultMessage());</span><br><span class="line">            System.out.println(<span class="string">&quot;错误字段:&quot;</span>+error.getField());</span><br><span class="line">            errorsMap.put(error.getField(), error.getDefaultMessage());</span><br><span class="line">        &#125;</span><br><span class="line">        model.addAtrribute(<span class="string">&quot;errorInfo&quot;</span>, errorsMap);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;add&quot;</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        employeesDao.save(employee);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;emps&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="关于-mvc-annotion-driven-标签"><a href="#关于-mvc-annotion-driven-标签" class="headerlink" title="关于 mvc:annotion-driven 标签"></a>关于 mvc:annotion-driven 标签</h2><ul>
<li><code>&lt;mvc:annotation-driven /&gt;</code> 会自动注册 <strong>RequestMappingHandlerMapping</strong>、<strong>RequestMappingHandlerAdapter</strong> 与 <strong>ExceptionHandlerExceptionResolver</strong> 这三个 Bean；</li>
<li>还将提供以下支持:<ul>
<li>支持使用 ConversionService 实例对表单参数进行类型转换；</li>
<li>支持使用 @NumberFormat annotation、@DateTimeFormat 注解完成数据类型的格式化；</li>
<li>支持使用 @Valid 注解对 JavaBean 实例进行 JSR 303 验证；</li>
<li>支持使用 @RequestBody 和 @ResponseBody 注解。</li>
</ul>
</li>
</ul>
<h3 id="SpringMVC无法加载静态资源的时候"><a href="#SpringMVC无法加载静态资源的时候" class="headerlink" title="SpringMVC无法加载静态资源的时候"></a>SpringMVC无法加载静态资源的时候</h3><p>在 SpringMVC 无法加载静态资源的时候我们使用了 <code>&lt;mvc:default-serviet-handle/&gt;</code>、<code>&lt;mvc:annotation-driven /&gt;</code> 这两个标签。</p>
<p>说明：</p>
<ol>
<li><p>都没配的时候，动态资源(@RequestMapping 映射的资源能访问)，静态资源（.htlm,.jsetc）不能访问；</p>
<ul>
<li><p><strong>动态资源之所以能访问</strong>，是因为 DefaultAnnotationHandlerMapping 中的 handler 保存了每一个资源的映射信；</p>
</li>
<li><p><strong>静态资源之所以不能访问</strong>，是因为 handlerMapping 中没有保存静态资源映射的请求。</p>
</li>
</ul>
</li>
<li><p>配置了 <code>&lt;mvc:default-serviet-handle/&gt;</code> 后，静态资源都能正常访问，但是动态资源不能正常访问；</p>
<ul>
<li>DefaultAnnotationHandlerMapping 在 HandlerMapping 中没有了，而是用<strong>SimpleUrlHandlerMapping</strong> 替换了，SimpleUrlHandlerMapping 的作用就是将所有请求直接交给Tomcat 处理；</li>
<li><strong>动态资源不能访问</strong>，是因为 DefaultAnnotationHandlerMapping 没有了，没有了每一个资源对应的映射信息；</li>
<li><strong>静态资源之所以不能访问</strong>，是因为 simpleUrlHandlerMapping 将所有请求直接交给 tomcat 处理。</li>
</ul>
</li>
<li><p>配置了 <code>&lt;mvc:default-serviet-handle/&gt;</code>、<code>&lt;mvc:annotation-driven /&gt;</code> 后，都能访问；</p>
<ol>
<li><strong>动态资源能访问</strong>，是因为 <code>&lt;mvc:annotation-driven /&gt;</code> 注册了 RequestMappingHandlerMapping，它的 HandlerMathods 属性保存了每一个请求用哪个方法处理，所以动态资源可以访问；</li>
<li>静态资源之所以不能访问，是 RequestMappingHandlerMapping 无法处理的请求会交给 simpleUrlHandlerMapping 将转而交给 tomcat 处理，因而，静态资源也能访问。</li>
</ol>
</li>
</ol>
<h2 id="处理-JSON-使用-HttpMesssaageConverter"><a href="#处理-JSON-使用-HttpMesssaageConverter" class="headerlink" title="处理 JSON (使用 HttpMesssaageConverter)"></a>处理 JSON (使用 HttpMesssaageConverter)</h2><h3 id="SpringMVC支持Ajax"><a href="#SpringMVC支持Ajax" class="headerlink" title="SpringMVC支持Ajax"></a>SpringMVC支持Ajax</h3><p>SpringMVC 快速完成 ajax 功能？</p>
<ul>
<li>返回数据是json就可以了;</li>
<li>页面使用 jQuery 提供的 <code>$.ajax(); </code>;</li>
</ul>
<p>原生实现 Ajax：</p>
<ol>
<li>导入 GSON 的 jar 包；</li>
<li>返回的数据用 Gson 转成 Json；</li>
<li>利用响应，写回去。</li>
</ol>
<p>SpringMVC 实现 ajax：</p>
<ol>
<li><p>导包（jackson：jackson-annotations-2.11.2.jar、jackson-core-2.11.2.jar、jackson-databind-2.11.2.jar）；</p>
</li>
<li><p>直接使用，测试；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AjaxTestController</span></span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    EmployeeDao employeeDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ResponseBody</span>  <span class="comment">// 将返回的数据放在响应体中，如果是对象，jackson包自动将对象转换为Json对象</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/ajaxGetAll&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Collection&lt;Employee&gt; <span class="title">ajaxGetAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Conlection&lt;Employee&gt; all = employeeDao.getAll();</span><br><span class="line">        <span class="keyword">return</span> all;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h4 id="ReqeuestBody-和-ResponseBody"><a href="#ReqeuestBody-和-ResponseBody" class="headerlink" title="@ReqeuestBody 和 @ResponseBody"></a>@ReqeuestBody 和 @ResponseBody</h4><ul>
<li><p><strong>@ResponseBody</strong>：将对象转换为 json 数据，放在响应体中，传回数据。</p>
</li>
<li><p><strong>@ReqeuestBody</strong>：接收请求数据，转换为 json 格式；</p>
<ul>
<li><p><strong>@ReqeuestBody</strong>：接收请求数据，转换为 json 格式；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestBody(&quot;/body&quot;)</span></span><br><span class="line"><span class="meta">@ReuquestMapping(&quot;/test1&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">test1</span><span class="params">(String body)</span></span>&#123;</span><br><span class="line">    System.out.println(body);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;emps&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>加参数上，可以将<strong>json数据封装成一个对象</strong>;</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ReuquestMapping(&quot;/test1&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">test1</span><span class="params">(<span class="meta">@RequestBody</span> Employee employee)</span></span>&#123;</span><br><span class="line">    System.out.println(employee);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;emps&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>HttpEntity：可以<strong>拿到请求体和所有请求头数据</strong>；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ReuquestMappint(&quot;/test2&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">test1</span><span class="params">(HttpEntity&lt;String&gt; body)</span></span>&#123;</span><br><span class="line">    System.out.println(body);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;emps&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ResponseEntity：可以设置响应体中内容;</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ResponseEntity&lt;String&gt;：String是响应体中内容的类型</span></span><br><span class="line"><span class="meta">@RequestMappint(&quot;/test3&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ResponseEntity&lt;String&gt; <span class="title">test3</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// new RessponseEntity&lt;&gt;(body, headers, statusCode);</span></span><br><span class="line">    String body= <span class="string">&quot;&lt;h1&gt;success&lt;/h1&gt;&quot;</span>;</span><br><span class="line">    MultiValueMap&lt;String, String&gt; headers= <span class="keyword">new</span> HttpHeaders();</span><br><span class="line">    headers.add(<span class="string">&quot;Set-Cookie&quot;</span>, <span class="string">&quot;username-test3&quot;</span>);</span><br><span class="line">    HttpStatus statusCode = HttpStatus.OK;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> RessponseEntity&lt;&gt;(body, headers, statusCode);;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ul>
<h3 id="HttpMesssaageConverter"><a href="#HttpMesssaageConverter" class="headerlink" title="HttpMesssaageConverter"></a>HttpMesssaageConverter</h3><p><code>HttpMessageConverter&lt;T&gt;</code> 是 Spring3.0 新添加的一个接口，负责将请求信息转换为一个对象类型为 <strong>T</strong>，<strong>将对象（类型为T)输出为响应信息</strong>；</p>
<p><code>HttpMessageConverter&lt;T&gt;</code>接口定义的方法:</p>
<ul>
<li><code>Boolean canRead(Class&lt;?&gt; clazz,MediaType mediaType)</code>：指定转换器可以读取的对象类型，即转换器<strong>是否可将请求信息转换为 clazz 类型的对象</strong>，同时指定支持 MIME 类型（text/html,application、json等）</li>
<li><code>Boolean canWrite(Class&lt;?&gt; clazz,MediaType mediaType)</code>：指定<strong>转换器是否可将 clazz 类型的对象写到响应流中</strong>，响应流支持的<em>媒体类型在 MediaType中定义</em>；</li>
<li><code>Llst&lt;MediaType&gt; getSupportMediaTypes()</code>:该转换器支持的媒体类型；</li>
<li><code>T read(Class&lt;? extends T&gt; clazz,HttpInputMessage inputMessage)</code>：将请求信息流转换为干类型的对象；</li>
<li><code>void write(T t,MediaType contnetType,HttpOutputMessgaeoutputMessage)</code>：将 T 类型的对象写到响应流中，同时指定相应的媒体类型为 contentType。</li>
</ul>
<p>流程释义：</p>
<p><img src="https://cdn.jsdelivr.net/gh/luxnln/cdn@main/img/Java/Frame/SpringMVC/SpringMVC%E8%BD%AC%E6%8D%A2%E5%99%A8%E6%B5%81%E7%A8%8B%E7%A4%BA%E6%84%8F%E5%9B%BE.jpg" alt="16"></p>
<p><strong>DispatcherServlet默认装配</strong> RequestMappingHandlerAdapter，而 RequestMappingHandlerAdapter 默认装配如下 HttpMessageConverter：(还有很多其它 Converter)</p>
<p><img src="https://cdn.jsdelivr.net/gh/luxnln/cdn@main/img/Java/Frame/SpringMVC/DispatcherServelt%E9%BB%98%E8%AE%A4%E8%A3%85%E9%85%8D%E7%9A%84Converter.jpg" alt="17"></p>
<p>加入 jackson.jar 包后，RequestMappingHandlerAdapter 装配的 HttpMessageConverter 会多一个Converter：MappingJackson2HttpMessageConverter。</p>
<h2 id="文件的上传"><a href="#文件的上传" class="headerlink" title="文件的上传"></a>文件的上传</h2><ol>
<li>文件上传表单标签必须添加属性：<code>enctype=&quot;multipart/form-data&quot;</code>；</li>
<li>导入文件上传需要的使用的包：<ul>
<li>commons-fileupload-1.2.1.jar</li>
<li>commons-io-1.4.jar</li>
</ul>
</li>
<li>只要在 SpringMVC 配置文件中，编写一个配置；配置文件上传解析器（MultipartResolver）</li>
<li>文件上传请求处理：在处理器方法上写一个 <code>@RequestParam(value = &quot;headImg&quot;)MultipartFile file</code> 封装当前文件信息，可以直接保存。</li>
</ol>
<p>示例：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">上传页面</span><br><span class="line">&lt;%</span><br><span class="line">    pageContext.setAttribute(<span class="string">&quot;ctp&quot;</span>, request.getContextPath());</span><br><span class="line">%&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;$&#123;ctp&#125;/upload&quot;</span> method=<span class="string">&quot;post&quot;</span> enctype=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span><br><span class="line">    用户头像：&lt;input type=<span class="string">&quot;file&quot;</span>name=<span class="string">&quot;headImg&quot;</span>/&gt;</span><br><span class="line">    用户名：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span>/&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;上传&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;hr&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;$&#123;ctp&#125;/mulUpload&quot;</span> method=<span class="string">&quot;post&quot;</span> enctype=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span><br><span class="line">    用户头像：&lt;input type=<span class="string">&quot;file&quot;</span>name=<span class="string">&quot;headImg&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">    用户头像：&lt;input type=<span class="string">&quot;file&quot;</span>name=<span class="string">&quot;headImg&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">    其它图片：&lt;input type=<span class="string">&quot;file&quot;</span>name=<span class="string">&quot;otherImg&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">    用户名：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;上传&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;span style=&quot;color: red&quot;&gt;$&#123;msg&#125;&lt;/span&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UploadController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/uploadPage&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toMain</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;upload/main&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/upload&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">upload</span><span class="params">(<span class="meta">@RequestParam(value = &quot;username&quot;, required = false)</span>String username,  <span class="meta">@RequestParam(value = &quot;headImg&quot;)</span>MultipartFile file, Model model)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;文件信息：&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;/t文件项的名字（即input标签的name）：&quot;</span> + file.getName());</span><br><span class="line">        System.out.println(<span class="string">&quot;/t文件的名字：&quot;</span> + file.getOriginalFilename());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 文件保存</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            file.transferTo(<span class="keyword">new</span> File(<span class="string">&quot;F:/Temp/&quot;</span>+file.getOriginalFilename()));</span><br><span class="line">            model.addAttribute(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;文件上传成功！&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            model.addAttribute(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;文件上传失败！&quot;</span>);</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;forward:/uploadPage&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/mulUpload&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">mulUpload</span><span class="params">(<span class="meta">@RequestParam(value = &quot;username&quot;, required = false)</span>String username,</span></span></span><br><span class="line"><span class="function"><span class="params">                            <span class="meta">@RequestParam(value = &quot;headImg&quot;)</span>MultipartFile[] files, // 在表单项中有多个name为hadImg的文件上传项，所以用数组接收</span></span></span><br><span class="line"><span class="function"><span class="params">                            <span class="meta">@RequestParam(value = &quot;otherImg&quot;)</span>MultipartFile oFile,  // 在表单项中还有个name为otherImg的文件上传项，所以多加一个参数并加对应注解接收</span></span></span><br><span class="line"><span class="function"><span class="params">                            Model model)</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (MultipartFile file : files) &#123;</span><br><span class="line">            <span class="keyword">if</span>(!file.isEmpty())&#123;</span><br><span class="line">                <span class="comment">// 文件保存</span></span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    file.transferTo(<span class="keyword">new</span> File(<span class="string">&quot;F:/Temp/&quot;</span>+file.getOriginalFilename()));</span><br><span class="line">                    model.addAttribute(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;文件上传成功！&quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    model.addAttribute(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;文件上传失败！&quot;</span>);</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 文件保存</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            oFile.transferTo(<span class="keyword">new</span> File(<span class="string">&quot;F:/Temp/&quot;</span>+oFile.getOriginalFilename()));</span><br><span class="line">            model.addAttribute(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;文件上传成功！&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            model.addAttribute(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;文件上传失败！&quot;</span>);</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;forward:/uploadPage&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="拦截器"><a href="#拦截器" class="headerlink" title="拦截器"></a>拦截器</h2><p>SpringMVC 提供了拦截器机制，允许运行目标方法之前进行一些拦截工作，或者目标方法执行之后进行一些其它处理。</p>
<p>Filter：JavaWEB 原生中提供的；</p>
<p>HandlerInteceptor：SpringMVC 的拦截器。</p>
<ul>
<li>preHandle：在目标方法执行之前调用；返回值为 boolean类型：返回的是true（等同于 chain.doFilter() 放行），返回的是flase不放行；</li>
<li>postHandel：在目标方法执行之后调用；目标方法调用之后，马上调用；</li>
<li>afterCompletion：在请求整个完成之后，即来到目标页面之后。chain.doFilter()放行，资源响应之后。</li>
</ul>
<h3 id="使用拦截器"><a href="#使用拦截器" class="headerlink" title="使用拦截器"></a>使用拦截器</h3><ol>
<li><p>拦截器是一个接口（HandlerInterceptor）；</p>
</li>
<li><p>实现 HandlerInterceptor 接口；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyInterceptor</span> <span class="keyword">implements</span> <span class="title">HandlerInterceptor</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 在目标方法执行之前运行</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;preHandle...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 在目标方法执行之后运行</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;postHandle&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 来到目标页面之后运行</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;afterCompletion&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在SpringMVC配置文件中注册这个拦截器，让其工作；</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 配置拦截器 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 配置某个拦截器:默认拦截所有请求 --&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.demo.interceptor.MyInterceptor&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!----&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 配置某个拦截器详细的信息 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;mvc:interceptor&gt;</span></span><br><span class="line"><span class="comment">        &amp;lt;!&amp;ndash; 只拦截interceptorTest01请求&amp;ndash;&amp;gt;</span></span><br><span class="line"><span class="comment">        &lt;mvc:mapping path=&quot;/interceptorTest01&quot;/&gt;</span></span><br><span class="line"><span class="comment">        &lt;bean class=&quot;com.demo.interceptor.MyInterceptor&quot;/&gt;</span></span><br><span class="line"><span class="comment">    &lt;/mvc:interceptor&gt;--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure>



</li>
</ol>
<p>拦截器执行流程：</p>
<p>MyInterceptor#prehandle ==&gt; HandlerAdapter#handle ==&gt; MyInterceptor#postHandle ==&gt; DispatcherSErvlete#render ==&gt; MyINterceptor#afterCompletion。</p>
<blockquote>
<p>只要放行了 afterCompletion 都会执行，哪怕中间运行目标方法或 postHandel 等流程中出现了问题。</p>
</blockquote>
<h3 id="多拦截器"><a href="#多拦截器" class="headerlink" title="多拦截器"></a>多拦截器</h3><p>只要继承接口后，直接在<code>&lt;mvc:interceptors&gt;</code>中进行配置即可。</p>
<blockquote>
<p>在多个拦截器的情况下，也是已经放行了的拦截器的 afterCompletion 总会执行。</p>
</blockquote>
<h3 id="Filter-和-Interceptor"><a href="#Filter-和-Interceptor" class="headerlink" title="Filter 和 Interceptor"></a>Filter 和 Interceptor</h3><p>什么时候用 <strong>Filter</strong> 什么时候，什么时候用 <strong>Interceptor</strong>？</p>
<ul>
<li>如果某些功能，需要其他组件配合完成，我们就是用 Intercepter；</li>
<li>其它情况使用 Filter。</li>
</ul>
<h2 id="国际化"><a href="#国际化" class="headerlink" title="国际化"></a>国际化</h2><p>步骤：</p>
<ol>
<li>写好国际化文件；</li>
<li>让 SpirngMVC 的 ResourceBundleMessageSource 管理国际化资源文件；</li>
<li>直接去页面取值。</li>
</ol>
<p>区域信息是按照浏览器带来的语言信息决定的：<code>Local locale = request.getLocale();</code> 获取到浏览器的区域信息；</p>
<p>SpringMVC中区域信息是由区域信息解析器得到的：<code>private LocaleResolver localeResolver;</code>。默认使用 AcceptHeaderLocaleResolver 实现类；</p>
<p>所有用到区域信息的地方都是用到 AcceptHeaderLocaleResolver 获取区域信息的。</p>
<p>示例：</p>
<ol>
<li><p>编写国际化文件：errors_zh_CN.properties、errors_en_US.properties 等；</p>
</li>
<li><p>编写文件内容时需要注意 key=value 的 key 的取值，需要校验的字段发生错误都会有自己的错误代码，国际化文件错误消息必须对应一个错误代码，错误代码可以通过 <code>BindingResult.getFieldErrors()</code> 获取所有发生错误的字段，遍历 <code>List&lt;FieldError&gt;</code> 获取的 code 错误代码；</p>
<ul>
<li><p>例如：Email 发生错误的 code代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">codes [</span><br><span class="line">    Email.person.email,</span><br><span class="line">    Email.email,</span><br><span class="line">    Email.java.lang.String,</span><br><span class="line">    Email</span><br><span class="line">]; </span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>四种错误代码从上到下越来越模糊匹配，配置文件有多个，精确优先；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">codes[</span><br><span class="line">    校验规则.隐含模型中对象的key.对象的属性</span><br><span class="line">    校验规则.属性名</span><br><span class="line">    校验规则.属性类型</span><br><span class="line">    校验规则</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置完国际化文件后需要让 SpringMVC 管理配置文件，id 必须是 messageSource；</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;messageSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.context.support.ResourceBundleMessageSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;basename&quot;</span> <span class="attr">value</span>=<span class="string">&quot;errors&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>



</li>
</ol>
<p><strong>高级国际化</strong></p>
<ol>
<li><p>动态传入参数：Length.java.lang.String = length incorrect {0} {1} {2}..</p>
<ul>
<li>{0}：永远是当前属性名</li>
<li>{1}、{2}匹配注解上参数，大小写顺序</li>
</ul>
</li>
<li><p>注释上直接表明错误消息；</p>
<ul>
<li>注释上有个属性是 message，直接写上错误信息即可，缺点不能国际化；</li>
<li>@Min(value = 18,message = “年龄不可小于18”) 。</li>
</ul>
</li>
</ol>
<h3 id="点击链接切换国际化"><a href="#点击链接切换国际化" class="headerlink" title="点击链接切换国际化"></a>点击链接切换国际化</h3><ol>
<li>链接中带区域信息，例如：<code>...?locale=zh_CN</code>；</li>
<li>自定义一个区域信息解析类，实现 LocaleResolver 类，请求参数有携带则使用携带的区域信息，没有则使用浏览器携带的区域信息；</li>
<li>在SpringMVC中配置使用自定义的区域信息解析类。</li>
<li></li>
</ol>
<p>还可以使用 SpringMVC 提供的 SessionLocalResover 解析器，把请求参数携带的区域信息放进 session 中(<code>session.setAttribute(SessionLocalResolver.class.getName()+&quot;.LOCALE&quot;, 1)</code>)，那么SessionLocalResover 解析器就会从session中取区域信息。</p>
<p>另外，我们还可以使用 LocalChangeInterceptor 拦截器对请求拦截，把请求参数携带的区域信息放进区域信息解析器需要的位置（调用解析器的 setLocale 方法来设置），但是默认的 AcceptHeaderLocaleResolver 并不支持setLocale 方法（在该方法的实现里抛异常），而 SessionLocalResolver 和 CookieLocalResolver 是支持的。</p>
<h2 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h2><ul>
<li>SpringMVC 通过 HandlerExceptionResolver 处理程序的异常，包括 Handler 映射、数据绑定以及目标方法执行时发生的异常；</li>
<li>SpringMVC 提供的 HandlerExceptionResolver 的实现类。</li>
</ul>
<p>默认就是这几个 <strong>HandlerExceptionResolver</strong>：</p>
<ul>
<li>ExceptionHandlerExceptionResolver</li>
<li>ResponsestatusExceptionResolver</li>
<li>DefualtHandlerExceptionResolver</li>
</ul>
<h3 id="处理本类异常"><a href="#处理本类异常" class="headerlink" title="处理本类异常"></a>处理本类异常</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestException</span> </span>&#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/exception&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">forward</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;exception/main&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/exception01&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">exception01</span><span class="params">(Integer i)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;exception01&quot;</span>);</span><br><span class="line">        System.out.println(<span class="number">10</span> / i);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 告诉 SpringMVC 这个方法专门处理这个类发生的异常;</span></span><br><span class="line"><span class="comment">     * 1. 给方法上写一个 Exception 类型的参数，用来接收发生的异常;</span></span><br><span class="line"><span class="comment">     * 2. 要携带异常信息不能直接在参数位置写 Model;</span></span><br><span class="line"><span class="comment">     * 3. 返回 ModelAndView 就行了;</span></span><br><span class="line"><span class="comment">     * 4. 如果有多个 <span class="doctag">@ExptionHandler</span> 能能处理发生的异常，则精确优先;</span></span><br><span class="line"><span class="comment">     * 5. 全局异常处理与本来都能处理，则本类优先.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">// 处理多个异常</span></span><br><span class="line">    <span class="comment">// @ExceptionHandler(value = &#123;ArithmeticException.class, NullPointerException.class&#125;)</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(value = ArithmeticException.class)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">handlerException01</span><span class="params">(Exception exception)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;handleException01&quot;</span>);</span><br><span class="line">        ModelAndView view = <span class="keyword">new</span> ModelAndView(<span class="string">&quot;exception/myError&quot;</span>);</span><br><span class="line">        view.addObject(<span class="string">&quot;ex&quot;</span>, exception);</span><br><span class="line">        <span class="keyword">return</span> view;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="全局处理异常"><a href="#全局处理异常" class="headerlink" title="全局处理异常"></a>全局处理异常</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 1. 集中处理所有异常的类加入到IOC容器(使用<span class="doctag">@ControllerAdvice</span>)</span></span><br><span class="line"><span class="comment"> * 2. <span class="doctag">@ControllerAdvice</span>用来专门处理异常的类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HandleGlobalException</span> </span>&#123;</span><br><span class="line">    <span class="meta">@ExceptionHandler(value = ArithmeticException.class)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">handlerException01</span><span class="params">(Exception exception)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;handleGlobalException01&quot;</span>);</span><br><span class="line">        ModelAndView view = <span class="keyword">new</span> ModelAndView(<span class="string">&quot;exception/myError&quot;</span>);</span><br><span class="line">        view.addObject(<span class="string">&quot;ex&quot;</span>, exception);</span><br><span class="line">        <span class="keyword">return</span> view;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="RequestStatus-注解"><a href="#RequestStatus-注解" class="headerlink" title="@RequestStatus 注解"></a>@RequestStatus 注解</h3><p>@RequestStatus 标注在自定义异常上,返回一个服务器错误页面：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ResponseStatus(reason=&quot;用户被拒绝登录&quot;,value=HttpStatus.NOT_ACCEPTION)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UsernameNotFoundException</span> <span class="keyword">extends</span> <span class="title">RuntimeException</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> SERIA_VERSION_UID = <span class="number">1L</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Spring与SpringMVC整合"><a href="#Spring与SpringMVC整合" class="headerlink" title="Spring与SpringMVC整合"></a>Spring与SpringMVC整合</h2><p>Spring 与 SpringMVC 整合目的：<strong>明确分工</strong>；</p>
<p>SpringMVC 的配置文件就来配置和网站转发逻辑以及网站功能有关的（视图解析器、文件上传解析器，支持 Ajax等等）；</p>
<p>Spring 的配置文件来配置和业务有关的（事务控制，数据源等等）。</p>
<h3 id="如何整合"><a href="#如何整合" class="headerlink" title="如何整合"></a>如何整合</h3><p>方法一：在 SpringMVC 的配置文件中引入 Spring 的配置文件，如：<code>&lt;import resource=&quot;spring.xml&quot;/&gt;</code>；</p>
<p>方法二：SpringMVC 和 Spring 分容器；</p>
<ul>
<li><p>Spring 管理业务逻辑组件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.example&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:exclude-filter</span> <span class="attr">type</span>=<span class="string">&quot;annotation&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;org.springframework.stereotype.Controller&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:exclude-filter</span> <span class="attr">type</span>=<span class="string">&quot;annotation&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;org.springframework.web.bind.annotation.ControllerAdvice&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>SpringMVC 管理控制器组件；</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.example&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:include-filter</span> <span class="attr">type</span>=<span class="string">&quot;annotation&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;org.springframework.stereotype.Controller&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:include-filter</span> <span class="attr">type</span>=<span class="string">&quot;annotation&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;org.springframework.web.bind.annotation.ControllerAdvice&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Luxnln</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://github.com/luxnln/luxnln.github.io/2021/01/08/SpringMVC%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0/">https://github.com/luxnln/luxnln.github.io/2021/01/08/SpringMVC入门笔记/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://github.com/luxnln/luxnln.github.io" target="_blank">luxnln</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%A1%86%E6%9E%B6/">框架</a><a class="post-meta__tags" href="/tags/spring/">spring</a><a class="post-meta__tags" href="/tags/ssm/">ssm</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/luxnln/cdn@main/img/cover/cover3.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021/01/11/MyBatis%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0/"><img class="prev-cover" src="https://cdn.jsdelivr.net/gh/luxnln/cdn@main/img/cover/cover8.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">MyBatis入门笔记</div></div></a></div><div class="next-post pull-right"><a href="/2021/01/06/Spring5%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0/"><img class="next-cover" src="https://cdn.jsdelivr.net/gh/luxnln/cdn@main/img/cover/cover16.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Spring5入门笔记</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2021/01/06/Spring5入门笔记/" title="Spring5入门笔记"><img class="cover" src="https://cdn.jsdelivr.net/gh/luxnln/cdn@main/img/cover/cover16.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-01-06</div><div class="title">Spring5入门笔记</div></div></a></div><div><a href="/2021/01/11/MyBatis入门笔记/" title="MyBatis入门笔记"><img class="cover" src="https://cdn.jsdelivr.net/gh/luxnln/cdn@main/img/cover/cover8.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-01-11</div><div class="title">MyBatis入门笔记</div></div></a></div><div><a href="/2021/03/01/springboot2笔记/" title="Springboot2 学习笔记"><img class="cover" src="https://cdn.jsdelivr.net/gh/luxnln/cdn@main/img/cover/cover6.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-03-01</div><div class="title">Springboot2 学习笔记</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div id="comment-switch"><span class="first-comment">Valine</span><span class="switch-btn"></span><span class="second-comment">Gitalk</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div><div><div id="gitalk-container"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="https://cdn.jsdelivr.net/gh/luxnln/cdn@main/img/head/rocket.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">Luxnln</div><div class="author-info__description">一只奋斗的咸鱼</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">55</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">28</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">21</div></a></div></div><a class="button--animated" id="card-info-btn" href="https://github.com/luxnln/"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/luxnln" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fas fa-rss"></i></a><a class="social-icon" href="mailto:luxinlin.las@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">一只年轻的博客~</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#SpringMVC%E7%AE%80%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text">SpringMVC简述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A5%E9%97%A8%E6%A1%88%E4%BE%8B"><span class="toc-number">1.1.</span> <span class="toc-text">入门案例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E%E5%85%A5%E9%97%A8%E6%A1%88%E4%BE%8B%E7%9A%84%E8%AF%B4%E6%98%8E"><span class="toc-number">1.1.1.</span> <span class="toc-text">关于入门案例的说明</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E8%BF%90%E8%A1%8C%E6%B5%81%E7%A8%8B"><span class="toc-number">1.1.1.1.</span> <span class="toc-text">简单运行流程</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#RequestMapping-%E6%B3%A8%E8%A7%A3"><span class="toc-number">1.1.1.2.</span> <span class="toc-text">@RequestMapping 注解</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%83%BD%E5%90%A6%E4%B8%8D%E6%8C%87%E5%AE%9A%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%BD%8D%E7%BD%AE%EF%BC%9F"><span class="toc-number">1.1.1.3.</span> <span class="toc-text">能否不指定配置文件位置？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%BA%E5%95%A5%E5%BD%93%E6%88%91%E4%BB%AC%E5%88%9B%E5%BB%BA-index-html-%E6%96%87%E4%BB%B6%E5%B9%B6%E8%AE%BF%E9%97%AE%E6%97%B6%EF%BC%8C%E4%BC%9A%E6%8A%A5-404-%E7%9A%84%E9%94%99%E8%AF%AF"><span class="toc-number">1.1.1.4.</span> <span class="toc-text">为啥当我们创建 index.html 文件并访问时，会报 404 的错误?</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RequestMapping-%E8%AF%B7%E6%B1%82%E6%98%A0%E5%B0%84"><span class="toc-number">2.</span> <span class="toc-text">@RequestMapping 请求映射</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-RequestMapping-%E6%B3%A8%E8%A7%A3%E6%9D%A5%E6%98%A0%E5%B0%84%E8%AF%B7%E6%B1%82"><span class="toc-number">2.1.</span> <span class="toc-text">使用 @RequestMapping 注解来映射请求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RequsetMapping-%E7%9A%84%E5%B1%9E%E6%80%A7%E4%BB%8B%E7%BB%8D"><span class="toc-number">2.2.</span> <span class="toc-text">@RequsetMapping 的属性介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%94%AF%E6%8C%81-Ant-%E9%A3%8E%E6%A0%BC%E8%B5%84%E6%BA%90%E5%9C%B0%E5%9D%80"><span class="toc-number">2.3.</span> <span class="toc-text">支持 Ant 风格资源地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-PathVariable-%E6%B3%A8%E8%A7%A3%E6%98%A0%E5%B0%84-URL-%E7%BB%91%E5%AE%9A%E7%9A%84%E5%8D%A0%E4%BD%8D%E7%AC%A6"><span class="toc-number">2.4.</span> <span class="toc-text">使用 @PathVariable 注解映射 URL 绑定的占位符</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0%E7%9A%84%E6%98%A0%E5%B0%84"><span class="toc-number">3.</span> <span class="toc-text">请求参数的映射</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AE%E9%80%9A%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0"><span class="toc-number">3.1.</span> <span class="toc-text">普通请求参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0%E6%98%AF%E6%9F%90%E4%B8%AA%E5%AF%B9%E8%B1%A1%E5%AF%B9%E5%BA%94%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="toc-number">3.2.</span> <span class="toc-text">请求参数是某个对象对应的属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98"><span class="toc-number">3.3.</span> <span class="toc-text">解决请求参数乱码问题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E4%B9%B1%E7%A0%81"><span class="toc-number">3.3.1.</span> <span class="toc-text">请求乱码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%93%8D%E5%BA%94%E4%B9%B1%E7%A0%81"><span class="toc-number">3.3.2.</span> <span class="toc-text">响应乱码</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SpringMVC-%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%E5%8E%9F%E7%94%9FAPI"><span class="toc-number">3.4.</span> <span class="toc-text">SpringMVC 如何使用原生API</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E6%A8%A1%E5%9E%8B%E6%95%B0%E6%8D%AE%E2%80%93%E6%95%B0%E6%8D%AE%E8%BE%93%E5%87%BA%E5%88%B0%E9%A1%B5%E9%9D%A2"><span class="toc-number">4.</span> <span class="toc-text">处理模型数据–数据输出到页面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SpringMVC%E4%B9%9D%E5%A4%A7%E7%BB%84%E4%BB%B6"><span class="toc-number">5.</span> <span class="toc-text">SpringMVC九大组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE%E5%92%8C%E8%A7%86%E5%9B%BE%E8%A7%A3%E6%9E%90%E5%99%A8"><span class="toc-number">6.</span> <span class="toc-text">视图和视图解析器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE%E5%92%8C%E8%A7%86%E5%9B%BE%E8%A7%A3%E9%87%8A%E5%99%A8%E4%BB%8B%E7%BB%8D"><span class="toc-number">6.1.</span> <span class="toc-text">视图和视图解释器介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SpringMVC-%E5%A4%84%E7%90%86%E8%A7%86%E5%9B%BE%E5%AF%B9%E8%B1%A1%E6%B5%81%E7%A8%8B"><span class="toc-number">6.2.</span> <span class="toc-text">SpringMVC 处理视图对象流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-view-controller-%E5%B0%86%E8%AF%B7%E6%B1%82%E6%98%A0%E5%B0%84%E4%B8%80%E4%B8%AA%E9%A1%B5%E9%9D%A2"><span class="toc-number">6.3.</span> <span class="toc-text">使用 view-controller 将请求映射一个页面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#forword-%E5%92%8C-redirect-%E5%89%8D%E7%BC%80%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">6.4.</span> <span class="toc-text">forword 和 redirect 前缀的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E8%A7%86%E5%9B%BE%E8%A7%A3%E6%9E%90%E5%99%A8"><span class="toc-number">6.5.</span> <span class="toc-text">自定义视图解析器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RESTful-%E9%A3%8E%E6%A0%BC%E7%9A%84%E8%AF%B7%E6%B1%82"><span class="toc-number">7.</span> <span class="toc-text">RESTful 风格的请求</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#REST-%E4%BB%8B%E7%BB%8D"><span class="toc-number">7.1.</span> <span class="toc-text">REST 介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AE%E9%80%9A%E8%AF%B7%E6%B1%82%E7%9A%84-URL-%E4%B8%8E-REST-%E9%A3%8E%E6%A0%BC%E7%9A%84-URL-%E5%9C%B0%E5%9D%80%E8%AF%B7%E6%B1%82%E5%AF%B9%E6%AF%94"><span class="toc-number">7.2.</span> <span class="toc-text">普通请求的 URL 与 REST 风格的 URL 地址请求对比</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SpringMVC-%E6%94%AF%E6%8C%81-RESTFul-%E8%AF%B7%E6%B1%82"><span class="toc-number">7.3.</span> <span class="toc-text">SpringMVC 支持 RESTFul 请求</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B"><span class="toc-number">7.3.1.</span> <span class="toc-text">使用示例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SpringMVC-%E7%9A%84%E8%A1%A8%E5%8D%95%E6%A0%87%E7%AD%BE-amp-%E5%A4%84%E7%90%86%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90"><span class="toc-number">8.</span> <span class="toc-text">SpringMVC 的表单标签 &amp; 处理静态资源</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SpringMVC%E7%9A%84%E8%A1%A8%E5%8D%95%E6%A0%87%E7%AD%BE"><span class="toc-number">8.1.</span> <span class="toc-text">SpringMVC的表单标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90"><span class="toc-number">8.2.</span> <span class="toc-text">处理静态资源</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E8%BD%AC%E6%8D%A2-amp-%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F%E5%8C%96-amp-%E6%95%B0%E6%8D%AE%E6%A0%A1%E9%AA%8C"><span class="toc-number">9.</span> <span class="toc-text">数据转换 &amp; 数据格式化 &amp; 数据校验</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A%E6%B5%81%E7%A8%8B"><span class="toc-number">9.1.</span> <span class="toc-text">数据绑定流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2"><span class="toc-number">9.2.</span> <span class="toc-text">自定义类型转换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F%E5%8C%96"><span class="toc-number">9.3.</span> <span class="toc-text">数据格式化</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E6%A0%BC%E5%BC%8F%E5%8C%96"><span class="toc-number">9.3.1.</span> <span class="toc-text">日期格式化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E5%AD%97%E6%A0%BC%E5%BC%8F%E5%8C%96"><span class="toc-number">9.3.2.</span> <span class="toc-text">数字格式化</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%A0%A1%E9%AA%8C"><span class="toc-number">9.4.</span> <span class="toc-text">数据校验</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#JSR303"><span class="toc-number">9.4.1.</span> <span class="toc-text">JSR303</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Hibernate-Validator"><span class="toc-number">9.4.2.</span> <span class="toc-text">Hibernate Validator</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8E%9F%E7%94%9F%E8%A1%A8%E5%8D%95%E6%80%8E%E4%B9%88%E5%BE%97%E5%88%B0%E9%94%99%E8%AF%AF%E4%BF%A1%E6%81%AF%EF%BC%9F"><span class="toc-number">9.4.3.</span> <span class="toc-text">原生表单怎么得到错误信息？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E-mvc-annotion-driven-%E6%A0%87%E7%AD%BE"><span class="toc-number">10.</span> <span class="toc-text">关于 mvc:annotion-driven 标签</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SpringMVC%E6%97%A0%E6%B3%95%E5%8A%A0%E8%BD%BD%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E7%9A%84%E6%97%B6%E5%80%99"><span class="toc-number">10.1.</span> <span class="toc-text">SpringMVC无法加载静态资源的时候</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%84%E7%90%86-JSON-%E4%BD%BF%E7%94%A8-HttpMesssaageConverter"><span class="toc-number">11.</span> <span class="toc-text">处理 JSON (使用 HttpMesssaageConverter)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SpringMVC%E6%94%AF%E6%8C%81Ajax"><span class="toc-number">11.1.</span> <span class="toc-text">SpringMVC支持Ajax</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ReqeuestBody-%E5%92%8C-ResponseBody"><span class="toc-number">11.1.1.</span> <span class="toc-text">@ReqeuestBody 和 @ResponseBody</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HttpMesssaageConverter"><span class="toc-number">11.2.</span> <span class="toc-text">HttpMesssaageConverter</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%9A%84%E4%B8%8A%E4%BC%A0"><span class="toc-number">12.</span> <span class="toc-text">文件的上传</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="toc-number">13.</span> <span class="toc-text">拦截器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="toc-number">13.1.</span> <span class="toc-text">使用拦截器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="toc-number">13.2.</span> <span class="toc-text">多拦截器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Filter-%E5%92%8C-Interceptor"><span class="toc-number">13.3.</span> <span class="toc-text">Filter 和 Interceptor</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%BD%E9%99%85%E5%8C%96"><span class="toc-number">14.</span> <span class="toc-text">国际化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%82%B9%E5%87%BB%E9%93%BE%E6%8E%A5%E5%88%87%E6%8D%A2%E5%9B%BD%E9%99%85%E5%8C%96"><span class="toc-number">14.1.</span> <span class="toc-text">点击链接切换国际化</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-number">15.</span> <span class="toc-text">异常处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E6%9C%AC%E7%B1%BB%E5%BC%82%E5%B8%B8"><span class="toc-number">15.1.</span> <span class="toc-text">处理本类异常</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E5%A4%84%E7%90%86%E5%BC%82%E5%B8%B8"><span class="toc-number">15.2.</span> <span class="toc-text">全局处理异常</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RequestStatus-%E6%B3%A8%E8%A7%A3"><span class="toc-number">15.3.</span> <span class="toc-text">@RequestStatus 注解</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring%E4%B8%8ESpringMVC%E6%95%B4%E5%90%88"><span class="toc-number">16.</span> <span class="toc-text">Spring与SpringMVC整合</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E6%95%B4%E5%90%88"><span class="toc-number">16.1.</span> <span class="toc-text">如何整合</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2021/03/01/springboot2%E7%AC%94%E8%AE%B0/" title="Springboot2 学习笔记"><img src="https://cdn.jsdelivr.net/gh/luxnln/cdn@main/img/cover/cover6.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Springboot2 学习笔记"/></a><div class="content"><a class="title" href="/2021/03/01/springboot2%E7%AC%94%E8%AE%B0/" title="Springboot2 学习笔记">Springboot2 学习笔记</a><time datetime="2021-03-01T01:26:40.970Z" title="发表于 2021-03-01 09:26:40">2021-03-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/02/27/%E5%88%86%E9%A1%B5%E6%9D%A1%E6%A8%A1%E6%9D%BF/" title="分页条模板"><img src="https://cdn.jsdelivr.net/gh/luxnln/cdn@main/img/cover/cover23.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="分页条模板"/></a><div class="content"><a class="title" href="/2021/02/27/%E5%88%86%E9%A1%B5%E6%9D%A1%E6%A8%A1%E6%9D%BF/" title="分页条模板">分页条模板</a><time datetime="2021-02-27T02:04:02.000Z" title="发表于 2021-02-27 10:04:02">2021-02-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/01/11/MyBatis%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0/" title="MyBatis入门笔记"><img src="https://cdn.jsdelivr.net/gh/luxnln/cdn@main/img/cover/cover8.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MyBatis入门笔记"/></a><div class="content"><a class="title" href="/2021/01/11/MyBatis%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0/" title="MyBatis入门笔记">MyBatis入门笔记</a><time datetime="2021-01-11T01:54:11.000Z" title="发表于 2021-01-11 09:54:11">2021-01-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/01/08/SpringMVC%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0/" title="SpringMVC入门笔记"><img src="https://cdn.jsdelivr.net/gh/luxnln/cdn@main/img/cover/cover3.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SpringMVC入门笔记"/></a><div class="content"><a class="title" href="/2021/01/08/SpringMVC%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0/" title="SpringMVC入门笔记">SpringMVC入门笔记</a><time datetime="2021-01-08T01:15:07.000Z" title="发表于 2021-01-08 09:15:07">2021-01-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/01/06/Spring5%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0/" title="Spring5入门笔记"><img src="https://cdn.jsdelivr.net/gh/luxnln/cdn@main/img/cover/cover16.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spring5入门笔记"/></a><div class="content"><a class="title" href="/2021/01/06/Spring5%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0/" title="Spring5入门笔记">Spring5入门笔记</a><time datetime="2021-01-06T03:35:08.000Z" title="发表于 2021-01-06 11:35:08">2021-01-06</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://cdn.jsdelivr.net/gh/luxnln/cdn@main/img/cover/cover3.png')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By Luxnln</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">欢迎来到我的<a target="_blank" rel="noopener" href="https://luxnln.github.io/">博客</a>一起学习！</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="rightside.chat_btn"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="algolia-search"><div class="search-dialog"><div class="search-dialog__title" id="algolia-search-title">Algolia</div><div id="algolia-input-panel"><div id="algolia-search-input"></div></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-stats"></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/algolia.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    let initData = {
      el: '#vcomment',
      appId: 'uytqObeeku5pIvOuSPbKavBQ-gzGzoHsz',
      appKey: 'maDLKIIafoz3vsD2TiHgCsbF',
      placeholder: '记得留下你的匿名和邮箱....可以快速收到回復',
      avatar: 'monsterid',
      meta: 'nick,mail,link'.split(','),
      pageSize: '10',
      lang: 'zh-CN',
      recordIP: false,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: "",
      enableQQ: false,
      path: window.location.pathname,
    }

    if (true) { 
      initData.requiredFields= ('nick,mail'.split(','))
    }
    
    if (false) {
      const otherData = false
      initData = Object.assign(initData, otherData)
    }
    
    const valine = new Valine(initData)
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script><script>function addGitalkSource () {
  const ele = document.createElement('link')
  ele.rel = 'stylesheet'
  ele.href= 'https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css'
  document.getElementsByTagName('head')[0].appendChild(ele)
}

function loadGitalk () {
  function initGitalk () {
    var gitalk = new Gitalk({
      clientID: '4ca1b3485559d9a57698',
      clientSecret: '83103a3948d3dbe29eb820c515968f4813c93f0c',
      repo: 'for-gitalk',
      owner: 'luxnln',
      admin: ['luxnln'],
      id: '0f33e4aef2de14a5b4082334f7887747',
      language: 'zh-CN',
      perPage: 10,
      distractionFreeMode: false,
      pagerDirection: 'last',
      createIssueManually: false,
      updateCountCallback: commentCount
    })
    gitalk.render('gitalk-container')
  }

  if (typeof Gitalk === 'function') initGitalk()
  else {
    addGitalkSource()
    getScript('https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js').then(initGitalk)
  }
}

function commentCount(n){
  let isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
  if (isCommentCount) {
    isCommentCount.innerHTML= n
  }
}

if ('Valine' === 'Gitalk' || !false) {
  if (false) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
  else loadGitalk()
} else {
  function loadOtherComment () {
    loadGitalk()
  }
}</script></div><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-show-text.min.js" data-mobile="false" data-text="富强,民主,文明,和谐,自由,平等,公正,法治,爱国,敬业,诚信,友善" data-fontsize="15px" data-random="false" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>